<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 基本統計函式 | R 資料科學與統計</title>
  <meta name="description" content="Chapter 7 基本統計函式 | R 資料科學與統計" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 基本統計函式 | R 資料科學與統計" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Chapter 7 基本統計函式 | R 資料科學與統計" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 基本統計函式 | R 資料科學與統計" />
  
  <meta name="twitter:description" content="Chapter 7 基本統計函式 | R 資料科學與統計" />
  

<meta name="author" content="林建甫 Jeff Lin" />


<meta name="date" content="2020-10-17" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="basicfunctiuon.html"/>
<link rel="next" href="basictidy.html"/>
<script src="libs/header-attrs-2.3/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> R 語言基本概論</a>
<ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#下載與安裝-r"><i class="fa fa-check"></i><b>1.1</b> 下載與安裝 R</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#下載與安裝-rsudio"><i class="fa fa-check"></i><b>1.2</b> 下載與安裝 RSudio</a></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#簡單實例"><i class="fa fa-check"></i><b>1.3</b> 簡單實例</a></li>
<li class="chapter" data-level="1.4" data-path="intro.html"><a href="intro.html#物件-object"><i class="fa fa-check"></i><b>1.4</b> 物件 Object</a></li>
<li class="chapter" data-level="1.5" data-path="intro.html"><a href="intro.html#使用指令"><i class="fa fa-check"></i><b>1.5</b> 使用指令</a></li>
<li class="chapter" data-level="1.6" data-path="intro.html"><a href="intro.html#查詢顯示物件與刪除物件"><i class="fa fa-check"></i><b>1.6</b> 查詢顯示物件與刪除物件</a></li>
<li class="chapter" data-level="1.7" data-path="intro.html"><a href="intro.html#程式中止操作"><i class="fa fa-check"></i><b>1.7</b> 程式中止操作</a></li>
<li class="chapter" data-level="1.8" data-path="intro.html"><a href="intro.html#工作目錄"><i class="fa fa-check"></i><b>1.8</b> 工作目錄</a></li>
<li class="chapter" data-level="1.9" data-path="intro.html"><a href="intro.html#程式編輯軟體與整合系統-rstudio"><i class="fa fa-check"></i><b>1.9</b> 程式編輯軟體與整合系統 RStudio</a></li>
<li class="chapter" data-level="1.10" data-path="intro.html"><a href="intro.html#函式-function"><i class="fa fa-check"></i><b>1.10</b> 函式 Function</a></li>
<li class="chapter" data-level="1.11" data-path="intro.html"><a href="intro.html#套件-packages"><i class="fa fa-check"></i><b>1.11</b> 套件 Packages</a></li>
<li class="chapter" data-level="1.12" data-path="intro.html"><a href="intro.html#解說與輔助文件"><i class="fa fa-check"></i><b>1.12</b> 解說與輔助文件</a></li>
<li class="chapter" data-level="1.13" data-path="intro.html"><a href="intro.html#地區語系與時區"><i class="fa fa-check"></i><b>1.13</b> 地區語系與時區</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="vector.html"><a href="vector.html"><i class="fa fa-check"></i><b>2</b> 向量</a>
<ul>
<li class="chapter" data-level="2.1" data-path="vector.html"><a href="vector.html#向量"><i class="fa fa-check"></i><b>2.1</b> 向量</a></li>
<li class="chapter" data-level="2.2" data-path="vector.html"><a href="vector.html#向量基本資料類型"><i class="fa fa-check"></i><b>2.2</b> 向量基本資料類型</a></li>
<li class="chapter" data-level="2.3" data-path="vector.html"><a href="vector.html#向量產生函式-c"><i class="fa fa-check"></i><b>2.3</b> 向量產生函式 <code>c()</code></a></li>
<li class="chapter" data-level="2.4" data-path="vector.html"><a href="vector.html#向量基本運算操作符號"><i class="fa fa-check"></i><b>2.4</b> 向量基本運算操作符號</a></li>
<li class="chapter" data-level="2.5" data-path="vector.html"><a href="vector.html#向量基本算數操作"><i class="fa fa-check"></i><b>2.5</b> 向量基本算數操作</a></li>
<li class="chapter" data-level="2.6" data-path="vector.html"><a href="vector.html#向量關係比較操作"><i class="fa fa-check"></i><b>2.6</b> 向量關係比較操作</a></li>
<li class="chapter" data-level="2.7" data-path="vector.html"><a href="vector.html#向量邏輯操作"><i class="fa fa-check"></i><b>2.7</b> 向量邏輯操作</a></li>
<li class="chapter" data-level="2.8" data-path="vector.html"><a href="vector.html#向量元素命名"><i class="fa fa-check"></i><b>2.8</b> 向量元素命名</a></li>
<li class="chapter" data-level="2.9" data-path="vector.html"><a href="vector.html#向量下標與索引-inxex"><i class="fa fa-check"></i><b>2.9</b> 向量下標與索引 Inxex</a></li>
<li class="chapter" data-level="2.10" data-path="vector.html"><a href="vector.html#遺失值-缺失值-missing-values"><i class="fa fa-check"></i><b>2.10</b> 遺失值 (缺失值) Missing Values</a></li>
<li class="chapter" data-level="2.11" data-path="vector.html"><a href="vector.html#因子物件與類別變數-factor"><i class="fa fa-check"></i><b>2.11</b> 因子物件與類別變數 Factor</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="dataobject.html"><a href="dataobject.html"><i class="fa fa-check"></i><b>3</b> 資料物件</a>
<ul>
<li class="chapter" data-level="3.1" data-path="dataobject.html"><a href="dataobject.html#矩陣物件-matrix"><i class="fa fa-check"></i><b>3.1</b> 矩陣物件 Matrix</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="dataobject.html"><a href="dataobject.html#矩陣函式-matrix"><i class="fa fa-check"></i><b>3.1.1</b> 矩陣函式 matrix()</a></li>
<li class="chapter" data-level="3.1.2" data-path="dataobject.html"><a href="dataobject.html#矩陣命名-dimnames"><i class="fa fa-check"></i><b>3.1.2</b> 矩陣命名 dimnames()</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="dataobject.html"><a href="dataobject.html#矩陣的下標與索引-matrix-index"><i class="fa fa-check"></i><b>3.2</b> 矩陣的下標與索引 Matrix Index</a></li>
<li class="chapter" data-level="3.3" data-path="dataobject.html"><a href="dataobject.html#向量與矩陣的合併-rbind-與-cbind"><i class="fa fa-check"></i><b>3.3</b> 向量與矩陣的合併: rbind() 與 cbind()</a></li>
<li class="chapter" data-level="3.4" data-path="dataobject.html"><a href="dataobject.html#陣列物件-array"><i class="fa fa-check"></i><b>3.4</b> 陣列物件 Array</a></li>
<li class="chapter" data-level="3.5" data-path="dataobject.html"><a href="dataobject.html#列表物件-list"><i class="fa fa-check"></i><b>3.5</b> 列表物件 List</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="dataobject.html"><a href="dataobject.html#列表函式-list"><i class="fa fa-check"></i><b>3.5.1</b> 列表函式 list()</a></li>
<li class="chapter" data-level="3.5.2" data-path="dataobject.html"><a href="dataobject.html#列表的下標與索引-list-index"><i class="fa fa-check"></i><b>3.5.2</b> 列表的下標與索引 List Index</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="dataobject.html"><a href="dataobject.html#資料框架-data-frame"><i class="fa fa-check"></i><b>3.6</b> 資料框架 Data Frame</a></li>
<li class="chapter" data-level="3.7" data-path="dataobject.html"><a href="dataobject.html#資料框架函式-data.frame"><i class="fa fa-check"></i><b>3.7</b> 資料框架函式 data.frame()</a>
<ul>
<li class="chapter" data-level="3.7.1" data-path="dataobject.html"><a href="dataobject.html#資料框架的下標與索引-data-frame-index"><i class="fa fa-check"></i><b>3.7.1</b> 資料框架的下標與索引 Data Frame Index</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="datainout.html"><a href="datainout.html"><i class="fa fa-check"></i><b>4</b> 資料輸入與輸出</a>
<ul>
<li class="chapter" data-level="4.1" data-path="datainout.html"><a href="datainout.html#資料框架"><i class="fa fa-check"></i><b>4.1</b> 資料框架</a></li>
<li class="chapter" data-level="4.2" data-path="datainout.html"><a href="datainout.html#輸入外部-ascii-資料檔案至-r-資料框架-空白分隔"><i class="fa fa-check"></i><b>4.2</b> 輸入外部 ASCII 資料檔案至 R 資料框架: 空白分隔</a></li>
<li class="chapter" data-level="4.3" data-path="datainout.html"><a href="datainout.html#輸入外部-ascii-資料檔案至-r-資料框架-逗號分隔"><i class="fa fa-check"></i><b>4.3</b> 輸入外部 ASCII 資料檔案至 R 資料框架: 逗號分隔</a></li>
<li class="chapter" data-level="4.4" data-path="datainout.html"><a href="datainout.html#r-內建資料框架"><i class="fa fa-check"></i><b>4.4</b> R 內建資料框架</a></li>
<li class="chapter" data-level="4.5" data-path="datainout.html"><a href="datainout.html#輸出-r-資料"><i class="fa fa-check"></i><b>4.5</b> 輸出 {R} 資料</a></li>
<li class="chapter" data-level="4.6" data-path="datainout.html"><a href="datainout.html#儲存-r-格式資料檔"><i class="fa fa-check"></i><b>4.6</b> 儲存 {R} 格式資料檔</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="dataviz.html"><a href="dataviz.html"><i class="fa fa-check"></i><b>5</b> 資料視覺化分析</a>
<ul>
<li class="chapter" data-level="5.1" data-path="dataviz.html"><a href="dataviz.html#視覺化分析原則"><i class="fa fa-check"></i><b>5.1</b> 視覺化分析原則</a></li>
<li class="chapter" data-level="5.2" data-path="dataviz.html"><a href="dataviz.html#繪圖套件-ggplot2"><i class="fa fa-check"></i><b>5.2</b> 繪圖套件 ggplot2</a></li>
<li class="chapter" data-level="5.3" data-path="dataviz.html"><a href="dataviz.html#類別變數"><i class="fa fa-check"></i><b>5.3</b> 類別變數</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="dataviz.html"><a href="dataviz.html#單一類別變數"><i class="fa fa-check"></i><b>5.3.1</b> 單一類別變數</a></li>
<li class="chapter" data-level="5.3.2" data-path="dataviz.html"><a href="dataviz.html#多類別變數"><i class="fa fa-check"></i><b>5.3.2</b> 多類別變數</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="dataviz.html"><a href="dataviz.html#連續變數"><i class="fa fa-check"></i><b>5.4</b> 連續變數</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="dataviz.html"><a href="dataviz.html#單連續變數"><i class="fa fa-check"></i><b>5.4.1</b> 單連續變數</a></li>
<li class="chapter" data-level="5.4.2" data-path="dataviz.html"><a href="dataviz.html#二連續變數"><i class="fa fa-check"></i><b>5.4.2</b> 二連續變數</a></li>
<li class="chapter" data-level="5.4.3" data-path="dataviz.html"><a href="dataviz.html#三連續變數"><i class="fa fa-check"></i><b>5.4.3</b> 三連續變數</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="dataviz.html"><a href="dataviz.html#混合變數"><i class="fa fa-check"></i><b>5.5</b> 混合變數</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="dataviz.html"><a href="dataviz.html#一連續-一類別"><i class="fa fa-check"></i><b>5.5.1</b> 一連續 + 一類別</a></li>
<li class="chapter" data-level="5.5.2" data-path="dataviz.html"><a href="dataviz.html#二連續-一類別"><i class="fa fa-check"></i><b>5.5.2</b> 二連續 + 一類別</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="dataviz.html"><a href="dataviz.html#分組繪圖"><i class="fa fa-check"></i><b>5.6</b> 分組繪圖</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="basicfunctiuon.html"><a href="basicfunctiuon.html"><i class="fa fa-check"></i><b>6</b> 基本函式</a>
<ul>
<li class="chapter" data-level="6.1" data-path="basicfunctiuon.html"><a href="basicfunctiuon.html#函式語法"><i class="fa fa-check"></i><b>6.1</b> 函式語法</a></li>
<li class="chapter" data-level="6.2" data-path="basicfunctiuon.html"><a href="basicfunctiuon.html#檢視的函式原始碼定義"><i class="fa fa-check"></i><b>6.2</b> 檢視的函式原始碼定義</a></li>
<li class="chapter" data-level="6.3" data-path="basicfunctiuon.html"><a href="basicfunctiuon.html#數列函式"><i class="fa fa-check"></i><b>6.3</b> 數列函式</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="basicfunctiuon.html"><a href="basicfunctiuon.html#數列函式-seq-與-sequence"><i class="fa fa-check"></i><b>6.3.1</b> 數列函式: seq() 與 sequence()</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="basicfunctiuon.html"><a href="basicfunctiuon.html#重複元素函式-rep"><i class="fa fa-check"></i><b>6.4</b> 重複元素函式: rep()</a></li>
<li class="chapter" data-level="6.5" data-path="basicfunctiuon.html"><a href="basicfunctiuon.html#算數函式-arithmetic-computing-function"><i class="fa fa-check"></i><b>6.5</b> 算數函式 Arithmetic Computing Function</a></li>
<li class="chapter" data-level="6.6" data-path="basicfunctiuon.html"><a href="basicfunctiuon.html#組合與階乘函式-choose-與-factorial"><i class="fa fa-check"></i><b>6.6</b> 組合與階乘函式: choose() 與 factorial()</a></li>
<li class="chapter" data-level="6.7" data-path="basicfunctiuon.html"><a href="basicfunctiuon.html#選擇資料函式-all-any-which"><i class="fa fa-check"></i><b>6.7</b> 選擇資料函式: all(), any(), which()</a></li>
<li class="chapter" data-level="6.8" data-path="basicfunctiuon.html"><a href="basicfunctiuon.html#排序函式-ranking-and-sorting"><i class="fa fa-check"></i><b>6.8</b> 排序函式 Ranking and Sorting</a></li>
<li class="chapter" data-level="6.9" data-path="basicfunctiuon.html"><a href="basicfunctiuon.html#物件查看與強制轉換函式"><i class="fa fa-check"></i><b>6.9</b> 物件查看與強制轉換函式</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="basicstat.html"><a href="basicstat.html"><i class="fa fa-check"></i><b>7</b> 基本統計函式</a>
<ul>
<li class="chapter" data-level="7.1" data-path="basicstat.html"><a href="basicstat.html#敘述統計函式"><i class="fa fa-check"></i><b>7.1</b> 敘述統計函式</a></li>
<li class="chapter" data-level="7.2" data-path="basicstat.html"><a href="basicstat.html#類別資料表格函數"><i class="fa fa-check"></i><b>7.2</b> 類別資料表格函數</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="basicstat.html"><a href="basicstat.html#列聯表函式-table-xtabs"><i class="fa fa-check"></i><b>7.2.1</b> 列聯表函式: table(), xtabs()</a></li>
<li class="chapter" data-level="7.2.2" data-path="basicstat.html"><a href="basicstat.html#列聯表函式-ftable"><i class="fa fa-check"></i><b>7.2.2</b> 列聯表函式: ftable()</a></li>
<li class="chapter" data-level="7.2.3" data-path="basicstat.html"><a href="basicstat.html#列聯表函式-margin.table-prop.table"><i class="fa fa-check"></i><b>7.2.3</b> 列聯表函式: margin.table(), prop.table()</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="basicstat.html"><a href="basicstat.html#機率函式與亂數生成函式"><i class="fa fa-check"></i><b>7.3</b> 機率函式與亂數生成函式</a></li>
<li class="chapter" data-level="7.4" data-path="basicstat.html"><a href="basicstat.html#隨機抽樣函式-sample"><i class="fa fa-check"></i><b>7.4</b> 隨機抽樣函式 sample()</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="basictidy.html"><a href="basictidy.html"><i class="fa fa-check"></i><b>8</b> 資料基本處理</a>
<ul>
<li class="chapter" data-level="8.1" data-path="basictidy.html"><a href="basictidy.html#資料輸入套件-readr"><i class="fa fa-check"></i><b>8.1</b> 資料輸入套件 readr</a></li>
<li class="chapter" data-level="8.2" data-path="basictidy.html"><a href="basictidy.html#整潔資料-tidy-data"><i class="fa fa-check"></i><b>8.2</b> 整潔資料 Tidy Data</a></li>
<li class="chapter" data-level="8.3" data-path="basictidy.html"><a href="basictidy.html#tibble-與-data-frame"><i class="fa fa-check"></i><b>8.3</b> Tibble 與 Data Frame</a></li>
<li class="chapter" data-level="8.4" data-path="basictidy.html"><a href="basictidy.html#資料流動管道運算指令-pipe"><i class="fa fa-check"></i><b>8.4</b> 資料流動管道運算指令 Pipe</a></li>
<li class="chapter" data-level="8.5" data-path="basictidy.html"><a href="basictidy.html#資料檢視函式-glimpse"><i class="fa fa-check"></i><b>8.5</b> 資料檢視函式 glimpse()</a></li>
<li class="chapter" data-level="8.6" data-path="basictidy.html"><a href="basictidy.html#資料處裡-dplyr-套件"><i class="fa fa-check"></i><b>8.6</b> 資料處裡 dplyr 套件</a>
<ul>
<li class="chapter" data-level="8.6.1" data-path="basictidy.html"><a href="basictidy.html#選擇個體函式-filter"><i class="fa fa-check"></i><b>8.6.1</b> 選擇個體函式 <code>filter()</code></a></li>
<li class="chapter" data-level="8.6.2" data-path="basictidy.html"><a href="basictidy.html#依據變數值排序函式-arrange"><i class="fa fa-check"></i><b>8.6.2</b> 依據變數值排序函式 <code>arrange()</code></a></li>
<li class="chapter" data-level="8.6.3" data-path="basictidy.html"><a href="basictidy.html#選擇變數或欄位子集函式-select"><i class="fa fa-check"></i><b>8.6.3</b> 選擇變數或欄位子集函式 <code>select()</code></a></li>
<li class="chapter" data-level="8.6.4" data-path="basictidy.html"><a href="basictidy.html#變數轉換函式-mutate"><i class="fa fa-check"></i><b>8.6.4</b> 變數轉換函式 <code>mutate()</code></a></li>
<li class="chapter" data-level="8.6.5" data-path="basictidy.html"><a href="basictidy.html#隨機抽樣函式-sample_n-與-sample_frac"><i class="fa fa-check"></i><b>8.6.5</b> 隨機抽樣函式 <code>sample_n()</code> 與 <code>sample_frac()</code></a></li>
<li class="chapter" data-level="8.6.6" data-path="basictidy.html"><a href="basictidy.html#選出明顯不同個體函式-distinct-與-n_distinct"><i class="fa fa-check"></i><b>8.6.6</b> 選出明顯不同個體函式 <code>distinct()</code> 與 <code>n_distinct()</code></a></li>
<li class="chapter" data-level="8.6.7" data-path="basictidy.html"><a href="basictidy.html#利用橫列指標選出個體函式-slice"><i class="fa fa-check"></i><b>8.6.7</b> 利用橫列指標選出個體函式 <code>slice()</code></a></li>
<li class="chapter" data-level="8.6.8" data-path="basictidy.html"><a href="basictidy.html#計算常見統計量函式-summarise"><i class="fa fa-check"></i><b>8.6.8</b> 計算常見統計量函式 <code>summarise()</code></a></li>
<li class="chapter" data-level="8.6.9" data-path="basictidy.html"><a href="basictidy.html#資料分組操作函式-group_by"><i class="fa fa-check"></i><b>8.6.9</b> 資料分組操作函式 <code>group_by()</code></a></li>
<li class="chapter" data-level="8.6.10" data-path="basictidy.html"><a href="basictidy.html#多變數計算統計量函式-summarise_all"><i class="fa fa-check"></i><b>8.6.10</b> 多變數計算統計量函式 <code>summarise_all()</code></a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="basictidy.html"><a href="basictidy.html#資料聯集與交集函式"><i class="fa fa-check"></i><b>8.7</b> 資料聯集與交集函式</a></li>
<li class="chapter" data-level="8.8" data-path="basictidy.html"><a href="basictidy.html#資料合併函式"><i class="fa fa-check"></i><b>8.8</b> 資料合併函式</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="purrr.html"><a href="purrr.html"><i class="fa fa-check"></i><b>9</b> 資料迭代處理</a>
<ul>
<li class="chapter" data-level="9.1" data-path="purrr.html"><a href="purrr.html#對資料變數欄位-columns-進行相同操作"><i class="fa fa-check"></i><b>9.1</b> 對資料變數欄位 (columns) 進行相同操作</a></li>
<li class="chapter" data-level="9.2" data-path="purrr.html"><a href="purrr.html#對資料個體列位-rows-進行相同操作"><i class="fa fa-check"></i><b>9.2</b> 對資料個體列位 (rows) 進行相同操作</a></li>
<li class="chapter" data-level="9.3" data-path="purrr.html"><a href="purrr.html#依據條件進行變數轉換"><i class="fa fa-check"></i><b>9.3</b> 依據條件進行變數轉換</a></li>
<li class="chapter" data-level="9.4" data-path="purrr.html"><a href="purrr.html#r-資料物件操作函式-apply"><i class="fa fa-check"></i><b>9.4</b> {R} 資料物件操作函式: apply()</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="stringr.html"><a href="stringr.html"><i class="fa fa-check"></i><b>10</b> 文字與字串資料處理</a>
<ul>
<li class="chapter" data-level="10.1" data-path="stringr.html"><a href="stringr.html#文字與字串資料基礎"><i class="fa fa-check"></i><b>10.1</b> 文字與字串資料基礎</a></li>
<li class="chapter" data-level="10.2" data-path="stringr.html"><a href="stringr.html#套件-stringr"><i class="fa fa-check"></i><b>10.2</b> 套件 stringr</a></li>
<li class="chapter" data-level="10.3" data-path="stringr.html"><a href="stringr.html#合併文字或字串-str_c"><i class="fa fa-check"></i><b>10.3</b> 合併文字或字串 str_c()</a></li>
<li class="chapter" data-level="10.4" data-path="stringr.html"><a href="stringr.html#取出文字或字串向量中的部分元素-str_sub"><i class="fa fa-check"></i><b>10.4</b> 取出文字或字串向量中的部分元素 str_sub()</a></li>
<li class="chapter" data-level="10.5" data-path="stringr.html"><a href="stringr.html#語言設定地區與文字大小寫排序"><i class="fa fa-check"></i><b>10.5</b> 語言設定地區與文字大小寫排序</a></li>
<li class="chapter" data-level="10.6" data-path="stringr.html"><a href="stringr.html#移除空白-加入空白-截斷文字-str_trim-與-str_pad"><i class="fa fa-check"></i><b>10.6</b> 移除空白, 加入空白, 截斷文字 <code>str_trim()</code> 與 <code>str_pad()</code></a></li>
<li class="chapter" data-level="10.7" data-path="stringr.html"><a href="stringr.html#尋找特定形式文字或字串"><i class="fa fa-check"></i><b>10.7</b> 尋找特定形式文字或字串</a>
<ul>
<li class="chapter" data-level="10.7.1" data-path="stringr.html"><a href="stringr.html#偵測函式-str_detect"><i class="fa fa-check"></i><b>10.7.1</b> 偵測函式 <code>str_detect()</code></a></li>
<li class="chapter" data-level="10.7.2" data-path="stringr.html"><a href="stringr.html#確認位置函式-str_detect"><i class="fa fa-check"></i><b>10.7.2</b> 確認位置函式 <code>str_detect()</code></a></li>
<li class="chapter" data-level="10.7.3" data-path="stringr.html"><a href="stringr.html#確認索引函式-str_subset-與-str_which"><i class="fa fa-check"></i><b>10.7.3</b> 確認索引函式 <code>str_subset()</code> 與 <code>str_which()</code></a></li>
<li class="chapter" data-level="10.7.4" data-path="stringr.html"><a href="stringr.html#取出函式-str_extract"><i class="fa fa-check"></i><b>10.7.4</b> 取出函式 <code>str_extract()</code></a></li>
<li class="chapter" data-level="10.7.5" data-path="stringr.html"><a href="stringr.html#配對函式-str_match"><i class="fa fa-check"></i><b>10.7.5</b> 配對函式 <code>str_match()</code></a></li>
<li class="chapter" data-level="10.7.6" data-path="stringr.html"><a href="stringr.html#替代置換函式-str_replace"><i class="fa fa-check"></i><b>10.7.6</b> 替代置換函式 <code>str_replace()</code></a></li>
<li class="chapter" data-level="10.7.7" data-path="stringr.html"><a href="stringr.html#分割函式-str_split"><i class="fa fa-check"></i><b>10.7.7</b> 分割函式 <code>str_split()</code></a></li>
</ul></li>
<li class="chapter" data-level="10.8" data-path="stringr.html"><a href="stringr.html#群組尋找特定形式的文字與字串"><i class="fa fa-check"></i><b>10.8</b> 群組尋找特定形式的文字與字串</a></li>
<li class="chapter" data-level="10.9" data-path="stringr.html"><a href="stringr.html#尋找連續重覆特定形式的文字與字串"><i class="fa fa-check"></i><b>10.9</b> 尋找連續重覆特定形式的文字與字串</a></li>
<li class="chapter" data-level="10.10" data-path="stringr.html"><a href="stringr.html#正規表示文字與字串-萬用字元"><i class="fa fa-check"></i><b>10.10</b> 正規表示文字與字串 (萬用字元)</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="forcats.html"><a href="forcats.html"><i class="fa fa-check"></i><b>11</b> 因子資料處理</a>
<ul>
<li class="chapter" data-level="11.1" data-path="forcats.html"><a href="forcats.html#forcats-套件-基本函式"><i class="fa fa-check"></i><b>11.1</b> forcats 套件: 基本函式</a></li>
<li class="chapter" data-level="11.2" data-path="forcats.html"><a href="forcats.html#移除或增加部分類別水準"><i class="fa fa-check"></i><b>11.2</b> 移除或增加部分類別水準</a></li>
<li class="chapter" data-level="11.3" data-path="forcats.html"><a href="forcats.html#改變類別水準函式"><i class="fa fa-check"></i><b>11.3</b> 改變類別水準函式</a></li>
<li class="chapter" data-level="11.4" data-path="forcats.html"><a href="forcats.html#改變或合併類別水準函式-fct_lump"><i class="fa fa-check"></i><b>11.4</b> 改變或合併類別水準函式 fct_lump()</a></li>
<li class="chapter" data-level="11.5" data-path="forcats.html"><a href="forcats.html#類別水準的頻率排序函式-fct_infreq"><i class="fa fa-check"></i><b>11.5</b> 類別水準的頻率排序函式 fct_infreq()</a></li>
<li class="chapter" data-level="11.6" data-path="forcats.html"><a href="forcats.html#依照其他變數將類別重新排序函式-fct_reorder"><i class="fa fa-check"></i><b>11.6</b> 依照其他變數將類別重新排序函式 fct_reorder()</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="lubridate.html"><a href="lubridate.html"><i class="fa fa-check"></i><b>12</b> 日期時間處理</a>
<ul>
<li class="chapter" data-level="12.1" data-path="lubridate.html"><a href="lubridate.html#lubridate-套件的日期時間"><i class="fa fa-check"></i><b>12.1</b> lubridate 套件的日期時間</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="lubridate.html"><a href="lubridate.html#從文字或字串轉換創件日期時間物件"><i class="fa fa-check"></i><b>12.1.1</b> 從文字或字串轉換創件日期時間物件</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="lubridate.html"><a href="lubridate.html#從date-time-資料個別成分-創件日期時間物件."><i class="fa fa-check"></i><b>12.2</b> 從date-time 資料個別成分, 創件日期時間物件.</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="lubridate.html"><a href="lubridate.html#從已經建立的其他資料物件創件日期時間物件"><i class="fa fa-check"></i><b>12.2.1</b> 從已經建立的其他資料物件創件日期時間物件</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="lubridate.html"><a href="lubridate.html#時區轉換"><i class="fa fa-check"></i><b>12.3</b> 時區轉換</a></li>
<li class="chapter" data-level="12.4" data-path="lubridate.html"><a href="lubridate.html#取出-date-time-資料的個別成分"><i class="fa fa-check"></i><b>12.4</b> 取出 date-time 資料的個別成分</a></li>
<li class="chapter" data-level="12.5" data-path="lubridate.html"><a href="lubridate.html#計算時間長度"><i class="fa fa-check"></i><b>12.5</b> 計算時間長度</a>
<ul>
<li class="chapter" data-level="12.5.1" data-path="lubridate.html"><a href="lubridate.html#duration-創建以秒計算的時間長度的物件"><i class="fa fa-check"></i><b>12.5.1</b> <code>duration</code> 創建以秒計算的時間長度的物件</a></li>
<li class="chapter" data-level="12.5.2" data-path="lubridate.html"><a href="lubridate.html#period-創建以人類文明的時間單位計算時間長度"><i class="fa fa-check"></i><b>12.5.2</b> <code>period</code> 創建以人類文明的時間單位計算時間長度</a></li>
<li class="chapter" data-level="12.5.3" data-path="lubridate.html"><a href="lubridate.html#interval-計算二個-date-time-物件之間的時間長度."><i class="fa fa-check"></i><b>12.5.3</b> <code>interval</code> 計算二個 date-time 物件之間的時間長度.</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="StatIntro.html"><a href="StatIntro.html"><i class="fa fa-check"></i><b>13</b> 統計與醫學</a>
<ul>
<li class="chapter" data-level="13.1" data-path="StatIntro.html"><a href="StatIntro.html#醫學統計"><i class="fa fa-check"></i><b>13.1</b> 醫學統計</a></li>
<li class="chapter" data-level="13.2" data-path="StatIntro.html"><a href="StatIntro.html#統計與數學"><i class="fa fa-check"></i><b>13.2</b> 統計與數學</a></li>
<li class="chapter" data-level="13.3" data-path="StatIntro.html"><a href="StatIntro.html#醫學研究資料"><i class="fa fa-check"></i><b>13.3</b> 醫學研究資料</a></li>
<li class="chapter" data-level="13.4" data-path="StatIntro.html"><a href="StatIntro.html#統計計算與統計軟體"><i class="fa fa-check"></i><b>13.4</b> 統計計算與統計軟體</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="applications.html"><a href="applications.html"><i class="fa fa-check"></i><b>14</b> Applications</a>
<ul>
<li class="chapter" data-level="14.1" data-path="applications.html"><a href="applications.html#example-one"><i class="fa fa-check"></i><b>14.1</b> Example one</a></li>
<li class="chapter" data-level="14.2" data-path="applications.html"><a href="applications.html#example-two"><i class="fa fa-check"></i><b>14.2</b> Example two</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="final-words.html"><a href="final-words.html"><i class="fa fa-check"></i><b>15</b> Final Words</a></li>
<li class="chapter" data-level="16" data-path="temp.html"><a href="temp.html"><i class="fa fa-check"></i><b>16</b> Temp</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R 資料科學與統計</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="basicstat" class="section level1" number="7">
<h1><span class="header-section-number">Chapter 7</span> 基本統計函式</h1>
<p>{R} 有許多統計函式,
可以對向量物件進行統計分析,
{R} 內建所有常見的基礎敘述統計量,
例如累加與乘積函式,
<code>sum()</code>,
<code>cumsum()</code>,
<code>diff()</code>,
<code>prod()</code>,
<code>cumprod()</code>;
樣本統計量函式,
例如,
<code>mean()</code>,
<code>median()</code>,
<code>var()</code>,
<code>sd()</code>,
<code>range()</code>,
<code>min()</code>,
<code>max()</code>,
<code>quantile()</code>,
<code>sample()</code> 等.</p>
<p>使用 {R} 的統計函式進行資料分析時,
須可別注意缺失值,
若資料物件中有缺失值,
一些 {R} 的統計函式須另外做特別處裡,
可以對資料物件中的缺失值,
先使用函式
<code>na.omit()</code>
處理,
然後再進行資料分析,
例如,
<code>mean(na.omit(x))</code>.
另外,
可使用統計函式內的通用引數,
<code>na.rm = T</code>,
例如,
<code>mean(x, na.rm = T)</code>
然後再進行資料分析,
對矩陣或資料框架物件做運算,
若資料物件中有缺失值,
常會有不可預期的結果必須小心.</p>
<table>
<caption>基本統計函式</caption>
<colgroup>
<col width="20%" />
<col width="23%" />
<col width="56%" />
</colgroup>
<thead>
<tr class="header">
<th>格式</th>
<th>說明</th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>sum(x)</code></td>
<td>加總和 (scalar)</td>
<td><span class="math inline">\(y = \sum_i x_i\)</span></td>
</tr>
<tr class="even">
<td><code>cumsum(x)</code></td>
<td>累計加總和 (vector)</td>
<td><span class="math inline">\(z_j = \sum_{i \le j} x_i\)</span></td>
</tr>
<tr class="odd">
<td><code>diff(x)</code></td>
<td><code>x[i+1]-x[i]</code></td>
<td><span class="math inline">\(z_i = x_{i+1} - x_i\)</span></td>
</tr>
<tr class="even">
<td><code>lag(x, k)</code></td>
<td><code>x[i-k]</code></td>
<td><span class="math inline">\(z_i = x_{i-k}\)</span>, 對應 <code>x[i]</code> 回傳 <code>x[i-k]</code></td>
</tr>
<tr class="odd">
<td><code>lead(x, k)</code></td>
<td><code>x[i+k]</code></td>
<td><span class="math inline">\(z_i = x_{i+k}\)</span>, 對應 <code>x[i]</code> 回傳 <code>x[i+k]</code></td>
</tr>
<tr class="even">
<td><code>prod(x)</code></td>
<td>乘積 (product)</td>
<td><span class="math inline">\(y = \prod_i x_i\)</span></td>
</tr>
<tr class="odd">
<td><code>cumprod(x)</code></td>
<td>累計乘積</td>
<td>$z_j = _{i j} x_i</td>
</tr>
<tr class="even">
<td><code>mean(x)</code></td>
<td>平均值 (mean)</td>
<td><span class="math inline">\(\bar{x} = \frac{1}{n} \sum_i x_i\)</span>)</td>
</tr>
<tr class="odd">
<td><code>median(x)</code></td>
<td>中位數 (median)</td>
<td><span class="math inline">\(0.5\)</span> quantile, <span class="math inline">\(50^{th}\)</span> percentile</td>
</tr>
<tr class="even">
<td><code>var(x)</code></td>
<td>變異數, 共變異數</td>
<td><span class="math inline">\(s^2 = \frac{1}{n-1} \sum_i (x_i - \bar{x})^2\)</span></td>
</tr>
<tr class="odd">
<td><code>sd(x)</code></td>
<td>標準差 (SD)</td>
<td><span class="math inline">\(s = \sqrt{s^2}\)</span></td>
</tr>
<tr class="even">
<td><code>range(x)</code></td>
<td>範圍 (range)</td>
<td><span class="math inline">\((\min (x), \max (x))\)</span></td>
</tr>
<tr class="odd">
<td><code>min(x)</code></td>
<td>最小值</td>
<td><span class="math inline">\(\min (x)\)</span></td>
</tr>
<tr class="even">
<td><code>max(x)</code></td>
<td>最大值</td>
<td><span class="math inline">\(\max (x)\)</span></td>
</tr>
<tr class="odd">
<td><code>quantile(x)</code></td>
<td>百分位數</td>
<td></td>
</tr>
<tr class="even">
<td><code>fivenum(x)</code></td>
<td>五數摘要</td>
<td>(five-number summary) <span class="math inline">\((\min, Q_1, \text{median}, Q_3, \max)\)</span></td>
</tr>
<tr class="odd">
<td><code>sample(x)</code></td>
<td>隨機抽樣</td>
<td>random sample</td>
</tr>
</tbody>
</table>
<div id="敘述統計函式" class="section level2" number="7.1">
<h2><span class="header-section-number">7.1</span> 敘述統計函式</h2>
<p>{R} 內建一些基本敘述統計, 如計算平均值與變異等.
<code>z &lt;- range(x)</code> 函式回傳一個向量,
二個元素 <span class="math inline">\((\min(x), \max(x))\)</span>;
極大值與極小值分別為 <code>min(x)</code>, <code>max(x)</code>;
求取百分位值可以用 <code>quantile()</code>,
如 <code>quantile(x, probs = c(0.05, 0.25, 0.5, 0.75, 0.95)</code>.
<code>fivenum(x)</code> 回傳 <span class="math inline">\(\mathbf{x}\)</span> 向量 <span class="math inline">\((\min, Q_1, \text{median}, Q_3, \max)\)</span>.</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="basicstat.html#cb143-1" aria-hidden="true"></a><span class="co">## basic descriptive statistics</span></span>
<span id="cb143-2"><a href="basicstat.html#cb143-2" aria-hidden="true"></a>x &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="op">-</span><span class="dv">2</span>, <span class="dv">3</span>, <span class="fl">0.3</span>)</span>
<span id="cb143-3"><a href="basicstat.html#cb143-3" aria-hidden="true"></a>x</span>
<span id="cb143-4"><a href="basicstat.html#cb143-4" aria-hidden="true"></a><span class="co">##  [1] -2.0 -1.7 -1.4 -1.1 -0.8 -0.5 -0.2  0.1  0.4  0.7  1.0  1.3  1.6  1.9  2.2  2.5  2.8</span></span>
<span id="cb143-5"><a href="basicstat.html#cb143-5" aria-hidden="true"></a><span class="kw">sum</span>(x)</span>
<span id="cb143-6"><a href="basicstat.html#cb143-6" aria-hidden="true"></a><span class="co">## [1] 6.8</span></span>
<span id="cb143-7"><a href="basicstat.html#cb143-7" aria-hidden="true"></a><span class="kw">cumsum</span>(x)</span>
<span id="cb143-8"><a href="basicstat.html#cb143-8" aria-hidden="true"></a><span class="co">##  [1] -2.0 -3.7 -5.1 -6.2 -7.0 -7.5 -7.7 -7.6 -7.2 -6.5 -5.5 -4.2 -2.6 -0.7  1.5  4.0  6.8</span></span>
<span id="cb143-9"><a href="basicstat.html#cb143-9" aria-hidden="true"></a><span class="kw">diff</span>(x)</span>
<span id="cb143-10"><a href="basicstat.html#cb143-10" aria-hidden="true"></a><span class="co">##  [1] 0.3 0.3 0.3 0.3 0.3 0.3 0.3 0.3 0.3 0.3 0.3 0.3 0.3 0.3 0.3 0.3</span></span>
<span id="cb143-11"><a href="basicstat.html#cb143-11" aria-hidden="true"></a><span class="kw">prod</span>(x)</span>
<span id="cb143-12"><a href="basicstat.html#cb143-12" aria-hidden="true"></a><span class="co">## [1] -0.7138</span></span>
<span id="cb143-13"><a href="basicstat.html#cb143-13" aria-hidden="true"></a><span class="kw">cumprod</span>(x)</span>
<span id="cb143-14"><a href="basicstat.html#cb143-14" aria-hidden="true"></a><span class="co">##  [1] -2.00000  3.40000 -4.76000  5.23600 -4.18880  2.09440 -0.41888 -0.04189 -0.01676</span></span>
<span id="cb143-15"><a href="basicstat.html#cb143-15" aria-hidden="true"></a><span class="co">## [10] -0.01173 -0.01173 -0.01525 -0.02440 -0.04635 -0.10197 -0.25493 -0.71381</span></span>
<span id="cb143-16"><a href="basicstat.html#cb143-16" aria-hidden="true"></a><span class="kw">mean</span>(x)</span>
<span id="cb143-17"><a href="basicstat.html#cb143-17" aria-hidden="true"></a><span class="co">## [1] 0.4</span></span>
<span id="cb143-18"><a href="basicstat.html#cb143-18" aria-hidden="true"></a><span class="kw">median</span>(x)</span>
<span id="cb143-19"><a href="basicstat.html#cb143-19" aria-hidden="true"></a><span class="co">## [1] 0.4</span></span>
<span id="cb143-20"><a href="basicstat.html#cb143-20" aria-hidden="true"></a><span class="kw">var</span>(x)</span>
<span id="cb143-21"><a href="basicstat.html#cb143-21" aria-hidden="true"></a><span class="co">## [1] 2.295</span></span>
<span id="cb143-22"><a href="basicstat.html#cb143-22" aria-hidden="true"></a><span class="kw">sd</span>(x)</span>
<span id="cb143-23"><a href="basicstat.html#cb143-23" aria-hidden="true"></a><span class="co">## [1] 1.515</span></span>
<span id="cb143-24"><a href="basicstat.html#cb143-24" aria-hidden="true"></a><span class="kw">range</span>(x)</span>
<span id="cb143-25"><a href="basicstat.html#cb143-25" aria-hidden="true"></a><span class="co">## [1] -2.0  2.8</span></span>
<span id="cb143-26"><a href="basicstat.html#cb143-26" aria-hidden="true"></a><span class="kw">min</span>(x)</span>
<span id="cb143-27"><a href="basicstat.html#cb143-27" aria-hidden="true"></a><span class="co">## [1] -2</span></span>
<span id="cb143-28"><a href="basicstat.html#cb143-28" aria-hidden="true"></a><span class="kw">max</span>(x)</span>
<span id="cb143-29"><a href="basicstat.html#cb143-29" aria-hidden="true"></a><span class="co">## [1] 2.8</span></span>
<span id="cb143-30"><a href="basicstat.html#cb143-30" aria-hidden="true"></a><span class="co">## quantile</span></span>
<span id="cb143-31"><a href="basicstat.html#cb143-31" aria-hidden="true"></a>y &lt;-<span class="st"> </span><span class="kw">quantile</span>(x, <span class="dt">probs =</span> <span class="kw">c</span>(<span class="fl">0.05</span>, <span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>, <span class="fl">0.95</span>))</span>
<span id="cb143-32"><a href="basicstat.html#cb143-32" aria-hidden="true"></a>y</span>
<span id="cb143-33"><a href="basicstat.html#cb143-33" aria-hidden="true"></a><span class="co">##    5%   25%   50%   75%   95% </span></span>
<span id="cb143-34"><a href="basicstat.html#cb143-34" aria-hidden="true"></a><span class="co">## -1.76 -0.80  0.40  1.60  2.56</span></span>
<span id="cb143-35"><a href="basicstat.html#cb143-35" aria-hidden="true"></a><span class="co"># IQR: inter-quantile range</span></span>
<span id="cb143-36"><a href="basicstat.html#cb143-36" aria-hidden="true"></a>iqr =<span class="st"> </span>y[<span class="dv">4</span>] <span class="op">-</span><span class="st"> </span>y[<span class="dv">2</span>]</span>
<span id="cb143-37"><a href="basicstat.html#cb143-37" aria-hidden="true"></a>iqr</span>
<span id="cb143-38"><a href="basicstat.html#cb143-38" aria-hidden="true"></a><span class="co">## 75% </span></span>
<span id="cb143-39"><a href="basicstat.html#cb143-39" aria-hidden="true"></a><span class="co">## 2.4</span></span>
<span id="cb143-40"><a href="basicstat.html#cb143-40" aria-hidden="true"></a><span class="co">## five numnber summary</span></span>
<span id="cb143-41"><a href="basicstat.html#cb143-41" aria-hidden="true"></a><span class="kw">fivenum</span>(x)</span>
<span id="cb143-42"><a href="basicstat.html#cb143-42" aria-hidden="true"></a><span class="co">## [1] -2.0 -0.8  0.4  1.6  2.8</span></span>
<span id="cb143-43"><a href="basicstat.html#cb143-43" aria-hidden="true"></a><span class="co"># missing values</span></span>
<span id="cb143-44"><a href="basicstat.html#cb143-44" aria-hidden="true"></a>x[<span class="dv">3</span>] &lt;-<span class="st"> </span><span class="ot">NA</span></span>
<span id="cb143-45"><a href="basicstat.html#cb143-45" aria-hidden="true"></a>x[<span class="dv">7</span>] &lt;-<span class="st"> </span><span class="ot">NA</span></span>
<span id="cb143-46"><a href="basicstat.html#cb143-46" aria-hidden="true"></a>x</span>
<span id="cb143-47"><a href="basicstat.html#cb143-47" aria-hidden="true"></a><span class="co">##  [1] -2.0 -1.7   NA -1.1 -0.8 -0.5   NA  0.1  0.4  0.7  1.0  1.3  1.6  1.9  2.2  2.5  2.8</span></span>
<span id="cb143-48"><a href="basicstat.html#cb143-48" aria-hidden="true"></a><span class="kw">mean</span>(x)</span>
<span id="cb143-49"><a href="basicstat.html#cb143-49" aria-hidden="true"></a><span class="co">## [1] NA</span></span>
<span id="cb143-50"><a href="basicstat.html#cb143-50" aria-hidden="true"></a><span class="kw">mean</span>(<span class="kw">na.omit</span>(x))</span>
<span id="cb143-51"><a href="basicstat.html#cb143-51" aria-hidden="true"></a><span class="co">## [1] 0.56</span></span>
<span id="cb143-52"><a href="basicstat.html#cb143-52" aria-hidden="true"></a><span class="kw">mean</span>(x, <span class="dt">na.rm =</span> T)</span>
<span id="cb143-53"><a href="basicstat.html#cb143-53" aria-hidden="true"></a><span class="co">## [1] 0.56</span></span>
<span id="cb143-54"><a href="basicstat.html#cb143-54" aria-hidden="true"></a><span class="kw">var</span>(x, <span class="dt">na.rm =</span> T)</span>
<span id="cb143-55"><a href="basicstat.html#cb143-55" aria-hidden="true"></a><span class="co">## [1] 2.338</span></span></code></pre></div>
</div>
<div id="類別資料表格函數" class="section level2" number="7.2">
<h2><span class="header-section-number">7.2</span> 類別資料表格函數</h2>
<p>在類別資料分析中,
常常會使用到
<strong>列聯表</strong>
(<strong>contingency table</strong>),
在 {R} 中, 一些函式用來製造或操作
<strong>列聯表</strong>
(<strong>contingency table</strong>),
例如,
<code>table()</code>,
<code>xtabs()</code>,
<code>as.table()</code>,
<code>is.table()</code>;
<code>ftable()</code>,
<code>read.ftable()</code>,
<code>wirte.ftable()</code>;
<code>as.data.frame()</code>;
<code>margin.table()</code>,
<code>prop.table()</code>,
<code>addmargins()</code>
等.
除此之外,
{R} 還有一些關於列聯表的套件,
例如,
<code>xtable</code>,
<code>vcd**,</code>reshape2<code>,</code>plyr<code>,</code>dplyr<code>,</code>tidyr<code>,</code>tidyverse<code>等, 將資料產生或轉換成列聯表. {R} 本身有一些分析列聯表的函式, 也有許多許多流行病學的套件與函式, 對 **列聯表** 進行分析. 例如,</code>Epi<code>,</code>epibasix<code>,</code>epiDisplay<code>(之前為</code>epicalc<code>),</code>epifit<code>,</code>epiR<code>,</code>epitools<code>,</code>RCOR<code>,</code>pROC`
等,
可以進行流行病學分析,
套件主要分析能力大至相同,
但各別套件仍有其特徵.</p>
<p>類別資料的輸入常見有 2 種型式,
(a)
<strong>個別資料</strong>
(<strong>individual data</strong>,
<strong>micro data</strong>,
<strong>case data</strong>);
(b)
<strong>聚集資料</strong>
(<strong>aggregated data</strong>,
<strong>macro data</strong>,
<strong>summarized data</strong>,
<strong>ecological data</strong>).
個別資料內包含每一位
<strong>個體</strong>
(<strong>subject</strong>,
<strong>individual</strong>),
研究者為目前的研究目的所蒐集的第一手資料,
記錄著每一為個體的測量值,
個別資料有時稱為
<strong>原始資料</strong>
(<strong>raw data</strong>,
<strong>primary data</strong>,
<strong>original data</strong>).
資料只有摘要之後的結果,
是由其他來源所得到的資料,
沒有每一位個體的比變數觀測值,
例如沒有每一位個體的性別, 年紀等觀測值,
這種整理分析候的資料有時稱為
<strong>二手資料</strong>
或
<strong>次級資料</strong>
(<strong>secondary data</strong>).</p>
<p>個別資料可以經過整理成為聚集資料形態,
但是, 若遺失每一位個體的測量值, 只有聚集資料, 則無法回復原來的個別資料.
因此, 研究盡量使用每一位個體的測量值, 但有些時候, 無法得到每一位個體的測量值,
若資料內全是類別變數,
則 個別資料 與 聚集資料 分析結論部會有差別,
但資料內若有連續變數如年紀, BMI 等,
將連續變數轉換成類別變數, 只呈現或分析聚集資料,
則會造成所謂的
<strong>生態謬誤</strong>
(<strong>ecological fallacy</strong>),
是指由 聚集資料 (團體) 所得到的推論,
不能反應 個別資料 (個人的真實) 所得到的推論,
所產生研究推論的誤導.</p>
<div id="列聯表函式-table-xtabs" class="section level3" number="7.2.1">
<h3><span class="header-section-number">7.2.1</span> 列聯表函式: table(), xtabs()</h3>
<p>使用函式
<code>table()</code>,
<code>xtabs()</code>,
可以從任何向量, 矩陣, 陣列, 資料框架
創造一個列聯表,
回傳一個
<strong>列聯表</strong>
物件.
函式
<code>table()</code>
回傳的物件稱為
<code>_contingency table_</code>.
這是一個 {R} 物件類別 (class)
為
<code>table</code>
之特殊物件.
使用函式
<code>as.table()</code>
可用來強制將 矩陣 或 資料框架 形成列聯表物件.
<code>as.matrix()</code> 強制將 列聯表物件 形成 矩陣.
<code>as.data.frame()</code> 強制將 列聯表物件 形成 資料框架.
<code>as.data.frame()</code> 是 <code>xtabs()</code> 的反函式.
使用函式
<code>is.table()</code>
可查看物件是否為列聯表物件.
使用函式
<code>table()</code>
須使用資料內個別變數或向量.
使用函式
<code>xtabs()</code>
可以從資料框架中,
利用統計模型公式 (model formula) 創造一個列聯表.
函式 <code>as.data.frame()</code>
則是函式
<code>xtabs()</code>
的反函式,
從列聯表物件創造一個資料框架.</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="basicstat.html#cb144-1" aria-hidden="true"></a><span class="kw">table</span>(variable_name, ...)</span>
<span id="cb144-2"><a href="basicstat.html#cb144-2" aria-hidden="true"></a><span class="kw">xtabs</span>(formula, data)</span></code></pre></div>
<p>其中常用引數如下.</p>
<ul>
<li><code>formula</code>: 使用統計模型公式輸入.</li>
<li><code>data</code>: 資料框架名.</li>
<li><code>na.action = "na.omit"</code>: 缺失值處理方式.</li>
<li><code>exclude</code>: 排除類別水準的細項, 自動內設排除缺失值.</li>
<li><code>useNA</code>: 處理缺失值選項.
<ul>
<li><code>"no"</code>: 排除缺失值.</li>
<li><code>"ifany"</code>: 納入缺失值, 若類別水準的計數 (count) 為正整數.</li>
<li><code>"always"</code>: 永遠納入缺失值成為 1 類別水準. 即使類別水準的計數 (count) 為 0 仍然自成 1 個類別水準.</li>
</ul></li>
</ul>
<p>Prentice (1973) 報告一個研究,
關於年長退伍軍人罹患肺癌, 且無法接受手術之臨床試驗,
%病患在 Veteran’s Administration 醫院隨機接受標準治療或新的化學療法,
病患在榮民醫院隨機接受標準治療方法或新的化學治療方法,
比較治療的主要結果變數為死亡時間,
變數名稱列在表.
資料在檔案 <strong>survVATrial.csv</strong>.</p>
<table>
<thead>
<tr class="header">
<th>變數</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>treat (therapy)</td>
<td>治療組別: 0 = 標準; 1 = 新治療</td>
</tr>
<tr class="even">
<td>cellcode</td>
<td>細胞型態; 1 = 鱗狀細胞; 2 = 小細胞; 3 = 腺體細胞; 4 = 大細胞</td>
</tr>
<tr class="odd">
<td>time</td>
<td>存活時間, 診斷日期至死亡日期, 單位以日計</td>
</tr>
<tr class="even">
<td>censor</td>
<td>設限狀態: 0 = 設限; 1 = 死亡</td>
</tr>
<tr class="odd">
<td>diagtime</td>
<td>Karnofsky performance score, 診斷時身體狀態表現的分數</td>
</tr>
<tr class="even">
<td>diagtime</td>
<td>診斷到隨機分配的時間, 以月計</td>
</tr>
<tr class="odd">
<td>age</td>
<td>診斷時的年齡 (以年計)</td>
</tr>
<tr class="even">
<td>prior</td>
<td>先前是否接受治療; 0 = 無; 1 = 有</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="basicstat.html#cb145-1" aria-hidden="true"></a>dd &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="st">&quot;./Data/survVATrial.csv&quot;</span>,</span>
<span id="cb145-2"><a href="basicstat.html#cb145-2" aria-hidden="true"></a>                 <span class="dt">header =</span> <span class="ot">TRUE</span>,</span>
<span id="cb145-3"><a href="basicstat.html#cb145-3" aria-hidden="true"></a>                 <span class="dt">sep =</span> <span class="st">&quot;,&quot;</span>,</span>
<span id="cb145-4"><a href="basicstat.html#cb145-4" aria-hidden="true"></a>                 <span class="dt">quote =</span> <span class="st">&quot;</span><span class="ch">\&quot;</span><span class="st">&#39;&quot;</span>,</span>
<span id="cb145-5"><a href="basicstat.html#cb145-5" aria-hidden="true"></a>                 <span class="dt">dec =</span> <span class="st">&quot;.&quot;</span>,</span>
<span id="cb145-6"><a href="basicstat.html#cb145-6" aria-hidden="true"></a>                 <span class="dt">row.names =</span> <span class="ot">NULL</span>,</span>
<span id="cb145-7"><a href="basicstat.html#cb145-7" aria-hidden="true"></a>                 <span class="co"># col.names,</span></span>
<span id="cb145-8"><a href="basicstat.html#cb145-8" aria-hidden="true"></a>                 <span class="dt">as.is =</span> <span class="ot">TRUE</span>,</span>
<span id="cb145-9"><a href="basicstat.html#cb145-9" aria-hidden="true"></a>                 <span class="co"># as.is = !stringsAsFactors,</span></span>
<span id="cb145-10"><a href="basicstat.html#cb145-10" aria-hidden="true"></a>                 <span class="dt">na.strings =</span> <span class="kw">c</span>(<span class="st">&quot;.&quot;</span>, <span class="st">&quot;NA&quot;</span>))</span>
<span id="cb145-11"><a href="basicstat.html#cb145-11" aria-hidden="true"></a><span class="kw">head</span>(dd)</span>
<span id="cb145-12"><a href="basicstat.html#cb145-12" aria-hidden="true"></a><span class="co">##   treat cellcode time censor diagtime kps age prior</span></span>
<span id="cb145-13"><a href="basicstat.html#cb145-13" aria-hidden="true"></a><span class="co">## 1     0        1   72      1       60   7  69     0</span></span>
<span id="cb145-14"><a href="basicstat.html#cb145-14" aria-hidden="true"></a><span class="co">## 2     0        1  411      1       70   5  64    10</span></span>
<span id="cb145-15"><a href="basicstat.html#cb145-15" aria-hidden="true"></a><span class="co">## 3     0        1  228      1       60   3  38     0</span></span>
<span id="cb145-16"><a href="basicstat.html#cb145-16" aria-hidden="true"></a><span class="co">## 4     0        1  126      1       60   9  63    10</span></span>
<span id="cb145-17"><a href="basicstat.html#cb145-17" aria-hidden="true"></a><span class="co">## 5     0        1  118      1       70  11  65    10</span></span>
<span id="cb145-18"><a href="basicstat.html#cb145-18" aria-hidden="true"></a><span class="co">## 6     0        1   10      1       20   5  49     0</span></span>
<span id="cb145-19"><a href="basicstat.html#cb145-19" aria-hidden="true"></a><span class="kw">str</span>(dd)</span>
<span id="cb145-20"><a href="basicstat.html#cb145-20" aria-hidden="true"></a><span class="co">## &#39;data.frame&#39;:	137 obs. of  8 variables:</span></span>
<span id="cb145-21"><a href="basicstat.html#cb145-21" aria-hidden="true"></a><span class="co">##  $ treat   : int  0 0 0 0 0 0 0 0 0 0 ...</span></span>
<span id="cb145-22"><a href="basicstat.html#cb145-22" aria-hidden="true"></a><span class="co">##  $ cellcode: int  1 1 1 1 1 1 1 1 1 1 ...</span></span>
<span id="cb145-23"><a href="basicstat.html#cb145-23" aria-hidden="true"></a><span class="co">##  $ time    : int  72 411 228 126 118 10 82 110 314 100 ...</span></span>
<span id="cb145-24"><a href="basicstat.html#cb145-24" aria-hidden="true"></a><span class="co">##  $ censor  : int  1 1 1 1 1 1 1 1 1 0 ...</span></span>
<span id="cb145-25"><a href="basicstat.html#cb145-25" aria-hidden="true"></a><span class="co">##  $ diagtime: int  60 70 60 60 70 20 40 80 50 70 ...</span></span>
<span id="cb145-26"><a href="basicstat.html#cb145-26" aria-hidden="true"></a><span class="co">##  $ kps     : int  7 5 3 9 11 5 10 29 18 6 ...</span></span>
<span id="cb145-27"><a href="basicstat.html#cb145-27" aria-hidden="true"></a><span class="co">##  $ age     : int  69 64 38 63 65 49 69 68 43 70 ...</span></span>
<span id="cb145-28"><a href="basicstat.html#cb145-28" aria-hidden="true"></a><span class="co">##  $ prior   : int  0 10 0 10 10 0 10 0 0 0 ...</span></span>
<span id="cb145-29"><a href="basicstat.html#cb145-29" aria-hidden="true"></a>dd<span class="op">$</span>treat &lt;-<span class="st"> </span><span class="kw">factor</span>(dd<span class="op">$</span>treat, <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;placebo&quot;</span>, <span class="st">&quot;test&quot;</span>))</span>
<span id="cb145-30"><a href="basicstat.html#cb145-30" aria-hidden="true"></a>dd<span class="op">$</span>cellcode &lt;-<span class="st"> </span><span class="kw">factor</span>(dd<span class="op">$</span>cellcode, </span>
<span id="cb145-31"><a href="basicstat.html#cb145-31" aria-hidden="true"></a>                      <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;squamous&quot;</span>, <span class="st">&quot;small&quot;</span>, <span class="st">&quot;adeno&quot;</span>, <span class="st">&quot;large&quot;</span>))</span>
<span id="cb145-32"><a href="basicstat.html#cb145-32" aria-hidden="true"></a>dd<span class="op">$</span>censor &lt;-<span class="st"> </span><span class="kw">factor</span>(dd<span class="op">$</span>censor, <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;survival&quot;</span>, <span class="st">&quot;dead&quot;</span>))</span>
<span id="cb145-33"><a href="basicstat.html#cb145-33" aria-hidden="true"></a>dd<span class="op">$</span>prior &lt;-<span class="st"> </span><span class="kw">factor</span>(dd<span class="op">$</span>prior, <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;no&quot;</span>, <span class="st">&quot;yes&quot;</span>))</span>
<span id="cb145-34"><a href="basicstat.html#cb145-34" aria-hidden="true"></a><span class="kw">head</span>(dd)</span>
<span id="cb145-35"><a href="basicstat.html#cb145-35" aria-hidden="true"></a><span class="co">##     treat cellcode time censor diagtime kps age prior</span></span>
<span id="cb145-36"><a href="basicstat.html#cb145-36" aria-hidden="true"></a><span class="co">## 1 placebo squamous   72   dead       60   7  69    no</span></span>
<span id="cb145-37"><a href="basicstat.html#cb145-37" aria-hidden="true"></a><span class="co">## 2 placebo squamous  411   dead       70   5  64   yes</span></span>
<span id="cb145-38"><a href="basicstat.html#cb145-38" aria-hidden="true"></a><span class="co">## 3 placebo squamous  228   dead       60   3  38    no</span></span>
<span id="cb145-39"><a href="basicstat.html#cb145-39" aria-hidden="true"></a><span class="co">## 4 placebo squamous  126   dead       60   9  63   yes</span></span>
<span id="cb145-40"><a href="basicstat.html#cb145-40" aria-hidden="true"></a><span class="co">## 5 placebo squamous  118   dead       70  11  65   yes</span></span>
<span id="cb145-41"><a href="basicstat.html#cb145-41" aria-hidden="true"></a><span class="co">## 6 placebo squamous   10   dead       20   5  49    no</span></span>
<span id="cb145-42"><a href="basicstat.html#cb145-42" aria-hidden="true"></a><span class="kw">str</span>(dd)</span>
<span id="cb145-43"><a href="basicstat.html#cb145-43" aria-hidden="true"></a><span class="co">## &#39;data.frame&#39;:	137 obs. of  8 variables:</span></span>
<span id="cb145-44"><a href="basicstat.html#cb145-44" aria-hidden="true"></a><span class="co">##  $ treat   : Factor w/ 2 levels &quot;placebo&quot;,&quot;test&quot;: 1 1 1 1 1 1 1 1 1 1 ...</span></span>
<span id="cb145-45"><a href="basicstat.html#cb145-45" aria-hidden="true"></a><span class="co">##  $ cellcode: Factor w/ 4 levels &quot;squamous&quot;,&quot;small&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...</span></span>
<span id="cb145-46"><a href="basicstat.html#cb145-46" aria-hidden="true"></a><span class="co">##  $ time    : int  72 411 228 126 118 10 82 110 314 100 ...</span></span>
<span id="cb145-47"><a href="basicstat.html#cb145-47" aria-hidden="true"></a><span class="co">##  $ censor  : Factor w/ 2 levels &quot;survival&quot;,&quot;dead&quot;: 2 2 2 2 2 2 2 2 2 1 ...</span></span>
<span id="cb145-48"><a href="basicstat.html#cb145-48" aria-hidden="true"></a><span class="co">##  $ diagtime: int  60 70 60 60 70 20 40 80 50 70 ...</span></span>
<span id="cb145-49"><a href="basicstat.html#cb145-49" aria-hidden="true"></a><span class="co">##  $ kps     : int  7 5 3 9 11 5 10 29 18 6 ...</span></span>
<span id="cb145-50"><a href="basicstat.html#cb145-50" aria-hidden="true"></a><span class="co">##  $ age     : int  69 64 38 63 65 49 69 68 43 70 ...</span></span>
<span id="cb145-51"><a href="basicstat.html#cb145-51" aria-hidden="true"></a><span class="co">##  $ prior   : Factor w/ 2 levels &quot;no&quot;,&quot;yes&quot;: 1 2 1 2 2 1 2 1 1 1 ...</span></span>
<span id="cb145-52"><a href="basicstat.html#cb145-52" aria-hidden="true"></a><span class="co">## one-way table</span></span>
<span id="cb145-53"><a href="basicstat.html#cb145-53" aria-hidden="true"></a><span class="co">## table()</span></span>
<span id="cb145-54"><a href="basicstat.html#cb145-54" aria-hidden="true"></a><span class="kw">table</span>(dd<span class="op">$</span>censor)</span>
<span id="cb145-55"><a href="basicstat.html#cb145-55" aria-hidden="true"></a><span class="co">## </span></span>
<span id="cb145-56"><a href="basicstat.html#cb145-56" aria-hidden="true"></a><span class="co">## survival     dead </span></span>
<span id="cb145-57"><a href="basicstat.html#cb145-57" aria-hidden="true"></a><span class="co">##        9      128</span></span>
<span id="cb145-58"><a href="basicstat.html#cb145-58" aria-hidden="true"></a><span class="kw">table</span>(dd<span class="op">$</span>cellcode)</span>
<span id="cb145-59"><a href="basicstat.html#cb145-59" aria-hidden="true"></a><span class="co">## </span></span>
<span id="cb145-60"><a href="basicstat.html#cb145-60" aria-hidden="true"></a><span class="co">## squamous    small    adeno    large </span></span>
<span id="cb145-61"><a href="basicstat.html#cb145-61" aria-hidden="true"></a><span class="co">##       35       48       27       27</span></span>
<span id="cb145-62"><a href="basicstat.html#cb145-62" aria-hidden="true"></a><span class="co">## xtabs()</span></span>
<span id="cb145-63"><a href="basicstat.html#cb145-63" aria-hidden="true"></a><span class="kw">xtabs</span>(<span class="op">~</span><span class="st"> </span>censor, <span class="dt">data =</span> dd)</span>
<span id="cb145-64"><a href="basicstat.html#cb145-64" aria-hidden="true"></a><span class="co">## censor</span></span>
<span id="cb145-65"><a href="basicstat.html#cb145-65" aria-hidden="true"></a><span class="co">## survival     dead </span></span>
<span id="cb145-66"><a href="basicstat.html#cb145-66" aria-hidden="true"></a><span class="co">##        9      128</span></span>
<span id="cb145-67"><a href="basicstat.html#cb145-67" aria-hidden="true"></a><span class="co">## two-way table()</span></span>
<span id="cb145-68"><a href="basicstat.html#cb145-68" aria-hidden="true"></a><span class="co">## table()</span></span>
<span id="cb145-69"><a href="basicstat.html#cb145-69" aria-hidden="true"></a>dd<span class="fl">.2</span>tab =<span class="st"> </span><span class="kw">table</span>(dd<span class="op">$</span>cellcode, dd<span class="op">$</span>censor)</span>
<span id="cb145-70"><a href="basicstat.html#cb145-70" aria-hidden="true"></a>dd<span class="fl">.2</span>tab </span>
<span id="cb145-71"><a href="basicstat.html#cb145-71" aria-hidden="true"></a><span class="co">##           </span></span>
<span id="cb145-72"><a href="basicstat.html#cb145-72" aria-hidden="true"></a><span class="co">##            survival dead</span></span>
<span id="cb145-73"><a href="basicstat.html#cb145-73" aria-hidden="true"></a><span class="co">##   squamous        4   31</span></span>
<span id="cb145-74"><a href="basicstat.html#cb145-74" aria-hidden="true"></a><span class="co">##   small           3   45</span></span>
<span id="cb145-75"><a href="basicstat.html#cb145-75" aria-hidden="true"></a><span class="co">##   adeno           1   26</span></span>
<span id="cb145-76"><a href="basicstat.html#cb145-76" aria-hidden="true"></a><span class="co">##   large           1   26</span></span>
<span id="cb145-77"><a href="basicstat.html#cb145-77" aria-hidden="true"></a><span class="kw">class</span>(dd<span class="fl">.2</span>tab)</span>
<span id="cb145-78"><a href="basicstat.html#cb145-78" aria-hidden="true"></a><span class="co">## [1] &quot;table&quot;</span></span>
<span id="cb145-79"><a href="basicstat.html#cb145-79" aria-hidden="true"></a><span class="co">## xtabs()</span></span>
<span id="cb145-80"><a href="basicstat.html#cb145-80" aria-hidden="true"></a>dd<span class="fl">.2</span>xtabs =<span class="st"> </span><span class="kw">xtabs</span>(<span class="op">~</span><span class="st"> </span>cellcode <span class="op">+</span><span class="st"> </span>censor, <span class="dt">data =</span> dd)</span>
<span id="cb145-81"><a href="basicstat.html#cb145-81" aria-hidden="true"></a>dd<span class="fl">.2</span>xtabs</span>
<span id="cb145-82"><a href="basicstat.html#cb145-82" aria-hidden="true"></a><span class="co">##           censor</span></span>
<span id="cb145-83"><a href="basicstat.html#cb145-83" aria-hidden="true"></a><span class="co">## cellcode   survival dead</span></span>
<span id="cb145-84"><a href="basicstat.html#cb145-84" aria-hidden="true"></a><span class="co">##   squamous        4   31</span></span>
<span id="cb145-85"><a href="basicstat.html#cb145-85" aria-hidden="true"></a><span class="co">##   small           3   45</span></span>
<span id="cb145-86"><a href="basicstat.html#cb145-86" aria-hidden="true"></a><span class="co">##   adeno           1   26</span></span>
<span id="cb145-87"><a href="basicstat.html#cb145-87" aria-hidden="true"></a><span class="co">##   large           1   26</span></span>
<span id="cb145-88"><a href="basicstat.html#cb145-88" aria-hidden="true"></a><span class="kw">class</span>(dd<span class="fl">.2</span>xtabs)</span>
<span id="cb145-89"><a href="basicstat.html#cb145-89" aria-hidden="true"></a><span class="co">## [1] &quot;xtabs&quot; &quot;table&quot;</span></span>
<span id="cb145-90"><a href="basicstat.html#cb145-90" aria-hidden="true"></a><span class="co">## three-way table()</span></span>
<span id="cb145-91"><a href="basicstat.html#cb145-91" aria-hidden="true"></a><span class="co">## table()</span></span>
<span id="cb145-92"><a href="basicstat.html#cb145-92" aria-hidden="true"></a>dd<span class="fl">.3</span>tab =<span class="st"> </span><span class="kw">table</span>(dd<span class="op">$</span>treat, dd<span class="op">$</span>censor, dd<span class="op">$</span>cellcode)</span>
<span id="cb145-93"><a href="basicstat.html#cb145-93" aria-hidden="true"></a>dd<span class="fl">.3</span>tab </span>
<span id="cb145-94"><a href="basicstat.html#cb145-94" aria-hidden="true"></a><span class="co">## , ,  = squamous</span></span>
<span id="cb145-95"><a href="basicstat.html#cb145-95" aria-hidden="true"></a><span class="co">## </span></span>
<span id="cb145-96"><a href="basicstat.html#cb145-96" aria-hidden="true"></a><span class="co">##          </span></span>
<span id="cb145-97"><a href="basicstat.html#cb145-97" aria-hidden="true"></a><span class="co">##           survival dead</span></span>
<span id="cb145-98"><a href="basicstat.html#cb145-98" aria-hidden="true"></a><span class="co">##   placebo        2   13</span></span>
<span id="cb145-99"><a href="basicstat.html#cb145-99" aria-hidden="true"></a><span class="co">##   test           2   18</span></span>
<span id="cb145-100"><a href="basicstat.html#cb145-100" aria-hidden="true"></a><span class="co">## </span></span>
<span id="cb145-101"><a href="basicstat.html#cb145-101" aria-hidden="true"></a><span class="co">## , ,  = small</span></span>
<span id="cb145-102"><a href="basicstat.html#cb145-102" aria-hidden="true"></a><span class="co">## </span></span>
<span id="cb145-103"><a href="basicstat.html#cb145-103" aria-hidden="true"></a><span class="co">##          </span></span>
<span id="cb145-104"><a href="basicstat.html#cb145-104" aria-hidden="true"></a><span class="co">##           survival dead</span></span>
<span id="cb145-105"><a href="basicstat.html#cb145-105" aria-hidden="true"></a><span class="co">##   placebo        2   28</span></span>
<span id="cb145-106"><a href="basicstat.html#cb145-106" aria-hidden="true"></a><span class="co">##   test           1   17</span></span>
<span id="cb145-107"><a href="basicstat.html#cb145-107" aria-hidden="true"></a><span class="co">## </span></span>
<span id="cb145-108"><a href="basicstat.html#cb145-108" aria-hidden="true"></a><span class="co">## , ,  = adeno</span></span>
<span id="cb145-109"><a href="basicstat.html#cb145-109" aria-hidden="true"></a><span class="co">## </span></span>
<span id="cb145-110"><a href="basicstat.html#cb145-110" aria-hidden="true"></a><span class="co">##          </span></span>
<span id="cb145-111"><a href="basicstat.html#cb145-111" aria-hidden="true"></a><span class="co">##           survival dead</span></span>
<span id="cb145-112"><a href="basicstat.html#cb145-112" aria-hidden="true"></a><span class="co">##   placebo        0    9</span></span>
<span id="cb145-113"><a href="basicstat.html#cb145-113" aria-hidden="true"></a><span class="co">##   test           1   17</span></span>
<span id="cb145-114"><a href="basicstat.html#cb145-114" aria-hidden="true"></a><span class="co">## </span></span>
<span id="cb145-115"><a href="basicstat.html#cb145-115" aria-hidden="true"></a><span class="co">## , ,  = large</span></span>
<span id="cb145-116"><a href="basicstat.html#cb145-116" aria-hidden="true"></a><span class="co">## </span></span>
<span id="cb145-117"><a href="basicstat.html#cb145-117" aria-hidden="true"></a><span class="co">##          </span></span>
<span id="cb145-118"><a href="basicstat.html#cb145-118" aria-hidden="true"></a><span class="co">##           survival dead</span></span>
<span id="cb145-119"><a href="basicstat.html#cb145-119" aria-hidden="true"></a><span class="co">##   placebo        1   14</span></span>
<span id="cb145-120"><a href="basicstat.html#cb145-120" aria-hidden="true"></a><span class="co">##   test           0   12</span></span>
<span id="cb145-121"><a href="basicstat.html#cb145-121" aria-hidden="true"></a><span class="co">## xtabs()</span></span>
<span id="cb145-122"><a href="basicstat.html#cb145-122" aria-hidden="true"></a>dd<span class="fl">.3</span>xtabs =<span class="st"> </span><span class="kw">xtabs</span>(<span class="op">~</span><span class="st"> </span>treat <span class="op">+</span><span class="st"> </span>censor <span class="op">+</span><span class="st"> </span>cellcode, <span class="dt">data =</span> dd)</span>
<span id="cb145-123"><a href="basicstat.html#cb145-123" aria-hidden="true"></a>dd<span class="fl">.3</span>xtabs</span>
<span id="cb145-124"><a href="basicstat.html#cb145-124" aria-hidden="true"></a><span class="co">## , , cellcode = squamous</span></span>
<span id="cb145-125"><a href="basicstat.html#cb145-125" aria-hidden="true"></a><span class="co">## </span></span>
<span id="cb145-126"><a href="basicstat.html#cb145-126" aria-hidden="true"></a><span class="co">##          censor</span></span>
<span id="cb145-127"><a href="basicstat.html#cb145-127" aria-hidden="true"></a><span class="co">## treat     survival dead</span></span>
<span id="cb145-128"><a href="basicstat.html#cb145-128" aria-hidden="true"></a><span class="co">##   placebo        2   13</span></span>
<span id="cb145-129"><a href="basicstat.html#cb145-129" aria-hidden="true"></a><span class="co">##   test           2   18</span></span>
<span id="cb145-130"><a href="basicstat.html#cb145-130" aria-hidden="true"></a><span class="co">## </span></span>
<span id="cb145-131"><a href="basicstat.html#cb145-131" aria-hidden="true"></a><span class="co">## , , cellcode = small</span></span>
<span id="cb145-132"><a href="basicstat.html#cb145-132" aria-hidden="true"></a><span class="co">## </span></span>
<span id="cb145-133"><a href="basicstat.html#cb145-133" aria-hidden="true"></a><span class="co">##          censor</span></span>
<span id="cb145-134"><a href="basicstat.html#cb145-134" aria-hidden="true"></a><span class="co">## treat     survival dead</span></span>
<span id="cb145-135"><a href="basicstat.html#cb145-135" aria-hidden="true"></a><span class="co">##   placebo        2   28</span></span>
<span id="cb145-136"><a href="basicstat.html#cb145-136" aria-hidden="true"></a><span class="co">##   test           1   17</span></span>
<span id="cb145-137"><a href="basicstat.html#cb145-137" aria-hidden="true"></a><span class="co">## </span></span>
<span id="cb145-138"><a href="basicstat.html#cb145-138" aria-hidden="true"></a><span class="co">## , , cellcode = adeno</span></span>
<span id="cb145-139"><a href="basicstat.html#cb145-139" aria-hidden="true"></a><span class="co">## </span></span>
<span id="cb145-140"><a href="basicstat.html#cb145-140" aria-hidden="true"></a><span class="co">##          censor</span></span>
<span id="cb145-141"><a href="basicstat.html#cb145-141" aria-hidden="true"></a><span class="co">## treat     survival dead</span></span>
<span id="cb145-142"><a href="basicstat.html#cb145-142" aria-hidden="true"></a><span class="co">##   placebo        0    9</span></span>
<span id="cb145-143"><a href="basicstat.html#cb145-143" aria-hidden="true"></a><span class="co">##   test           1   17</span></span>
<span id="cb145-144"><a href="basicstat.html#cb145-144" aria-hidden="true"></a><span class="co">## </span></span>
<span id="cb145-145"><a href="basicstat.html#cb145-145" aria-hidden="true"></a><span class="co">## , , cellcode = large</span></span>
<span id="cb145-146"><a href="basicstat.html#cb145-146" aria-hidden="true"></a><span class="co">## </span></span>
<span id="cb145-147"><a href="basicstat.html#cb145-147" aria-hidden="true"></a><span class="co">##          censor</span></span>
<span id="cb145-148"><a href="basicstat.html#cb145-148" aria-hidden="true"></a><span class="co">## treat     survival dead</span></span>
<span id="cb145-149"><a href="basicstat.html#cb145-149" aria-hidden="true"></a><span class="co">##   placebo        1   14</span></span>
<span id="cb145-150"><a href="basicstat.html#cb145-150" aria-hidden="true"></a><span class="co">##   test           0   12</span></span></code></pre></div>
</div>
<div id="列聯表函式-ftable" class="section level3" number="7.2.2">
<h3><span class="header-section-number">7.2.2</span> 列聯表函式: ftable()</h3>
<p>函式
<code>table()</code>
或
<code>xtabs()</code>
對高維度列聯表的呈現類似 list 形式,
較不方便操作,
改使用函式
<code>ftable()</code>,
可以從任何向量, 矩陣, 陣列, 資料框架
創造一個
<strong>扁平列聯表</strong>
(<strong>flat contingency table</strong>),
<strong>扁平列聯表</strong>
是一個
<code>ftalbe</code>
類別 (class) 的矩陣物件,
其中變數 (欄位, column) 為分類因子變數,
另外再加上各組頻率數目,
每一列 (row) 代表每一種分類的類別水準 (level).
使用函式
<code>ftable()</code>
得到
<code>ftable</code> 物件,
在 {R} 的列印上,
會比
<code>table()</code>
或
<code>xtabs()</code>
得到
<code>_contingency table_</code> 物件
好看.</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="basicstat.html#cb146-1" aria-hidden="true"></a><span class="co">## three-way table()</span></span>
<span id="cb146-2"><a href="basicstat.html#cb146-2" aria-hidden="true"></a><span class="co">## ftable()</span></span>
<span id="cb146-3"><a href="basicstat.html#cb146-3" aria-hidden="true"></a>dd<span class="fl">.3</span>ftab =<span class="st"> </span><span class="kw">ftable</span>(dd<span class="op">$</span>cellcode, dd<span class="op">$</span>treat, dd<span class="op">$</span>censor)</span>
<span id="cb146-4"><a href="basicstat.html#cb146-4" aria-hidden="true"></a>dd<span class="fl">.3</span>ftab</span>
<span id="cb146-5"><a href="basicstat.html#cb146-5" aria-hidden="true"></a><span class="co">##                   survival dead</span></span>
<span id="cb146-6"><a href="basicstat.html#cb146-6" aria-hidden="true"></a><span class="co">##                                </span></span>
<span id="cb146-7"><a href="basicstat.html#cb146-7" aria-hidden="true"></a><span class="co">## squamous placebo         2   13</span></span>
<span id="cb146-8"><a href="basicstat.html#cb146-8" aria-hidden="true"></a><span class="co">##          test            2   18</span></span>
<span id="cb146-9"><a href="basicstat.html#cb146-9" aria-hidden="true"></a><span class="co">## small    placebo         2   28</span></span>
<span id="cb146-10"><a href="basicstat.html#cb146-10" aria-hidden="true"></a><span class="co">##          test            1   17</span></span>
<span id="cb146-11"><a href="basicstat.html#cb146-11" aria-hidden="true"></a><span class="co">## adeno    placebo         0    9</span></span>
<span id="cb146-12"><a href="basicstat.html#cb146-12" aria-hidden="true"></a><span class="co">##          test            1   17</span></span>
<span id="cb146-13"><a href="basicstat.html#cb146-13" aria-hidden="true"></a><span class="co">## large    placebo         1   14</span></span>
<span id="cb146-14"><a href="basicstat.html#cb146-14" aria-hidden="true"></a><span class="co">##          test            0   12</span></span></code></pre></div>
</div>
<div id="列聯表函式-margin.table-prop.table" class="section level3" number="7.2.3">
<h3><span class="header-section-number">7.2.3</span> 列聯表函式: margin.table(), prop.table()</h3>
<p>使用函式
<code>margin.table()</code>
可以使用類別 (class) 為 <code>table</code> 的列聯表物件,
或是使用陣列型式 (array, matrix) 的列聯表物件
計算
<strong>邊際總合</strong>
(<strong>marginal total</strong>).
函式
<code>prop.table()</code>
從陣列型式 (array, matrix) 之列聯表物件,
計算列聯表物件的
<strong>相對頻率</strong>
(<strong>relative frequency</strong>).
函式
<code>addmargins()</code>
對列聯表物件進行邊際維度計算總和.</p>
<p>函式
<code>margin.table()</code>
與
函式
<code>prop.table()</code>
無法對
類別 (class) 為 <code>ftable</code> 的列聯表物件進行操作.
函式
<code>addmargins()</code>
可以對
類別 (class) 為 <code>table</code> 或 <code>ftable</code> 的列聯表物件進行操作.</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="basicstat.html#cb147-1" aria-hidden="true"></a><span class="kw">margin.table</span>(x, <span class="dt">margin =</span> <span class="ot">NULL</span>)</span>
<span id="cb147-2"><a href="basicstat.html#cb147-2" aria-hidden="true"></a><span class="kw">prop.table</span>(x, <span class="dt">margin =</span> <span class="ot">NULL</span>)</span>
<span id="cb147-3"><a href="basicstat.html#cb147-3" aria-hidden="true"></a><span class="kw">addmargins</span>(A, margin, ...)</span></code></pre></div>
<p>其中引數</p>
<ul>
<li><code>x</code>: <code>table</code> 物件.</li>
<li><code>A</code>: <code>table</code> 或 <code>ftable</code> 物件.</li>
<li><code>margin</code>: 維度下標或向量 (index/vector), 設定計算的邊際維度.
<ul>
<li><code>margin = NULL</code>: 計算列聯表內總和或個別空格分率 (cell count/proportion).</li>
<li><code>margin = 1</code>: 計算列聯表的列位 (row) 邊際總和或分率 (row marginal total/proportion).</li>
</ul></li>
<li><code>margin = 2</code>: 計算列聯表的欄位 (column) 邊際總和或分率 (column marginal total/proportion).</li>
<li><code>margin = k</code>: 其餘維度則依此列推.</li>
</ul>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="basicstat.html#cb148-1" aria-hidden="true"></a><span class="co">## one-way table</span></span>
<span id="cb148-2"><a href="basicstat.html#cb148-2" aria-hidden="true"></a><span class="co">## table()</span></span>
<span id="cb148-3"><a href="basicstat.html#cb148-3" aria-hidden="true"></a>dd<span class="fl">.1</span>tab =<span class="st"> </span><span class="kw">table</span>(dd<span class="op">$</span>cellcode)</span>
<span id="cb148-4"><a href="basicstat.html#cb148-4" aria-hidden="true"></a>dd<span class="fl">.1</span>tab</span>
<span id="cb148-5"><a href="basicstat.html#cb148-5" aria-hidden="true"></a><span class="co">## </span></span>
<span id="cb148-6"><a href="basicstat.html#cb148-6" aria-hidden="true"></a><span class="co">## squamous    small    adeno    large </span></span>
<span id="cb148-7"><a href="basicstat.html#cb148-7" aria-hidden="true"></a><span class="co">##       35       48       27       27</span></span>
<span id="cb148-8"><a href="basicstat.html#cb148-8" aria-hidden="true"></a><span class="kw">margin.table</span>(dd<span class="fl">.1</span>tab)</span>
<span id="cb148-9"><a href="basicstat.html#cb148-9" aria-hidden="true"></a><span class="co">## [1] 137</span></span>
<span id="cb148-10"><a href="basicstat.html#cb148-10" aria-hidden="true"></a><span class="kw">prop.table</span>(dd<span class="fl">.1</span>tab)</span>
<span id="cb148-11"><a href="basicstat.html#cb148-11" aria-hidden="true"></a><span class="co">## </span></span>
<span id="cb148-12"><a href="basicstat.html#cb148-12" aria-hidden="true"></a><span class="co">## squamous    small    adeno    large </span></span>
<span id="cb148-13"><a href="basicstat.html#cb148-13" aria-hidden="true"></a><span class="co">##   0.2555   0.3504   0.1971   0.1971</span></span>
<span id="cb148-14"><a href="basicstat.html#cb148-14" aria-hidden="true"></a><span class="co">## xtabs()</span></span>
<span id="cb148-15"><a href="basicstat.html#cb148-15" aria-hidden="true"></a>dd<span class="fl">.1</span>xtabs =<span class="st"> </span><span class="kw">xtabs</span>(<span class="op">~</span><span class="st"> </span>censor, <span class="dt">data =</span> dd)</span>
<span id="cb148-16"><a href="basicstat.html#cb148-16" aria-hidden="true"></a><span class="kw">margin.table</span>(dd<span class="fl">.1</span>xtabs)</span>
<span id="cb148-17"><a href="basicstat.html#cb148-17" aria-hidden="true"></a><span class="co">## [1] 137</span></span>
<span id="cb148-18"><a href="basicstat.html#cb148-18" aria-hidden="true"></a><span class="kw">prop.table</span>(dd<span class="fl">.1</span>xtabs)</span>
<span id="cb148-19"><a href="basicstat.html#cb148-19" aria-hidden="true"></a><span class="co">## censor</span></span>
<span id="cb148-20"><a href="basicstat.html#cb148-20" aria-hidden="true"></a><span class="co">## survival     dead </span></span>
<span id="cb148-21"><a href="basicstat.html#cb148-21" aria-hidden="true"></a><span class="co">##  0.06569  0.93431</span></span>
<span id="cb148-22"><a href="basicstat.html#cb148-22" aria-hidden="true"></a><span class="co">## two-way table()</span></span>
<span id="cb148-23"><a href="basicstat.html#cb148-23" aria-hidden="true"></a><span class="co">## table()</span></span>
<span id="cb148-24"><a href="basicstat.html#cb148-24" aria-hidden="true"></a>dd<span class="fl">.2</span>tab =<span class="st"> </span><span class="kw">table</span>(dd<span class="op">$</span>cellcode, dd<span class="op">$</span>censor)</span>
<span id="cb148-25"><a href="basicstat.html#cb148-25" aria-hidden="true"></a>dd<span class="fl">.2</span>tab </span>
<span id="cb148-26"><a href="basicstat.html#cb148-26" aria-hidden="true"></a><span class="co">##           </span></span>
<span id="cb148-27"><a href="basicstat.html#cb148-27" aria-hidden="true"></a><span class="co">##            survival dead</span></span>
<span id="cb148-28"><a href="basicstat.html#cb148-28" aria-hidden="true"></a><span class="co">##   squamous        4   31</span></span>
<span id="cb148-29"><a href="basicstat.html#cb148-29" aria-hidden="true"></a><span class="co">##   small           3   45</span></span>
<span id="cb148-30"><a href="basicstat.html#cb148-30" aria-hidden="true"></a><span class="co">##   adeno           1   26</span></span>
<span id="cb148-31"><a href="basicstat.html#cb148-31" aria-hidden="true"></a><span class="co">##   large           1   26</span></span>
<span id="cb148-32"><a href="basicstat.html#cb148-32" aria-hidden="true"></a><span class="co">## cell count total and proportion </span></span>
<span id="cb148-33"><a href="basicstat.html#cb148-33" aria-hidden="true"></a><span class="kw">margin.table</span>(dd<span class="fl">.2</span>tab)</span>
<span id="cb148-34"><a href="basicstat.html#cb148-34" aria-hidden="true"></a><span class="co">## [1] 137</span></span>
<span id="cb148-35"><a href="basicstat.html#cb148-35" aria-hidden="true"></a><span class="kw">prop.table</span>(dd<span class="fl">.2</span>tab)</span>
<span id="cb148-36"><a href="basicstat.html#cb148-36" aria-hidden="true"></a><span class="co">##           </span></span>
<span id="cb148-37"><a href="basicstat.html#cb148-37" aria-hidden="true"></a><span class="co">##            survival     dead</span></span>
<span id="cb148-38"><a href="basicstat.html#cb148-38" aria-hidden="true"></a><span class="co">##   squamous 0.029197 0.226277</span></span>
<span id="cb148-39"><a href="basicstat.html#cb148-39" aria-hidden="true"></a><span class="co">##   small    0.021898 0.328467</span></span>
<span id="cb148-40"><a href="basicstat.html#cb148-40" aria-hidden="true"></a><span class="co">##   adeno    0.007299 0.189781</span></span>
<span id="cb148-41"><a href="basicstat.html#cb148-41" aria-hidden="true"></a><span class="co">##   large    0.007299 0.189781</span></span>
<span id="cb148-42"><a href="basicstat.html#cb148-42" aria-hidden="true"></a><span class="co">## condition on row</span></span>
<span id="cb148-43"><a href="basicstat.html#cb148-43" aria-hidden="true"></a><span class="kw">margin.table</span>(dd<span class="fl">.2</span>tab, <span class="dt">margin =</span> <span class="dv">1</span>)</span>
<span id="cb148-44"><a href="basicstat.html#cb148-44" aria-hidden="true"></a><span class="co">## </span></span>
<span id="cb148-45"><a href="basicstat.html#cb148-45" aria-hidden="true"></a><span class="co">## squamous    small    adeno    large </span></span>
<span id="cb148-46"><a href="basicstat.html#cb148-46" aria-hidden="true"></a><span class="co">##       35       48       27       27</span></span>
<span id="cb148-47"><a href="basicstat.html#cb148-47" aria-hidden="true"></a><span class="kw">prop.table</span>(dd<span class="fl">.2</span>tab, <span class="dt">margin =</span> <span class="dv">1</span>)</span>
<span id="cb148-48"><a href="basicstat.html#cb148-48" aria-hidden="true"></a><span class="co">##           </span></span>
<span id="cb148-49"><a href="basicstat.html#cb148-49" aria-hidden="true"></a><span class="co">##            survival    dead</span></span>
<span id="cb148-50"><a href="basicstat.html#cb148-50" aria-hidden="true"></a><span class="co">##   squamous  0.11429 0.88571</span></span>
<span id="cb148-51"><a href="basicstat.html#cb148-51" aria-hidden="true"></a><span class="co">##   small     0.06250 0.93750</span></span>
<span id="cb148-52"><a href="basicstat.html#cb148-52" aria-hidden="true"></a><span class="co">##   adeno     0.03704 0.96296</span></span>
<span id="cb148-53"><a href="basicstat.html#cb148-53" aria-hidden="true"></a><span class="co">##   large     0.03704 0.96296</span></span>
<span id="cb148-54"><a href="basicstat.html#cb148-54" aria-hidden="true"></a><span class="co">## condition on column</span></span>
<span id="cb148-55"><a href="basicstat.html#cb148-55" aria-hidden="true"></a><span class="kw">margin.table</span>(dd<span class="fl">.2</span>tab, <span class="dt">margin =</span> <span class="dv">2</span>)</span>
<span id="cb148-56"><a href="basicstat.html#cb148-56" aria-hidden="true"></a><span class="co">## </span></span>
<span id="cb148-57"><a href="basicstat.html#cb148-57" aria-hidden="true"></a><span class="co">## survival     dead </span></span>
<span id="cb148-58"><a href="basicstat.html#cb148-58" aria-hidden="true"></a><span class="co">##        9      128</span></span>
<span id="cb148-59"><a href="basicstat.html#cb148-59" aria-hidden="true"></a><span class="kw">prop.table</span>(dd<span class="fl">.2</span>tab, <span class="dt">margin =</span> <span class="dv">2</span>)</span>
<span id="cb148-60"><a href="basicstat.html#cb148-60" aria-hidden="true"></a><span class="co">##           </span></span>
<span id="cb148-61"><a href="basicstat.html#cb148-61" aria-hidden="true"></a><span class="co">##            survival   dead</span></span>
<span id="cb148-62"><a href="basicstat.html#cb148-62" aria-hidden="true"></a><span class="co">##   squamous   0.4444 0.2422</span></span>
<span id="cb148-63"><a href="basicstat.html#cb148-63" aria-hidden="true"></a><span class="co">##   small      0.3333 0.3516</span></span>
<span id="cb148-64"><a href="basicstat.html#cb148-64" aria-hidden="true"></a><span class="co">##   adeno      0.1111 0.2031</span></span>
<span id="cb148-65"><a href="basicstat.html#cb148-65" aria-hidden="true"></a><span class="co">##   large      0.1111 0.2031</span></span>
<span id="cb148-66"><a href="basicstat.html#cb148-66" aria-hidden="true"></a><span class="co">## xtabs()</span></span>
<span id="cb148-67"><a href="basicstat.html#cb148-67" aria-hidden="true"></a>dd<span class="fl">.2</span>xtabs =<span class="st"> </span><span class="kw">xtabs</span>(<span class="op">~</span><span class="st"> </span>cellcode <span class="op">+</span><span class="st"> </span>censor, <span class="dt">data =</span> dd)</span>
<span id="cb148-68"><a href="basicstat.html#cb148-68" aria-hidden="true"></a>dd<span class="fl">.2</span>xtabs</span>
<span id="cb148-69"><a href="basicstat.html#cb148-69" aria-hidden="true"></a><span class="co">##           censor</span></span>
<span id="cb148-70"><a href="basicstat.html#cb148-70" aria-hidden="true"></a><span class="co">## cellcode   survival dead</span></span>
<span id="cb148-71"><a href="basicstat.html#cb148-71" aria-hidden="true"></a><span class="co">##   squamous        4   31</span></span>
<span id="cb148-72"><a href="basicstat.html#cb148-72" aria-hidden="true"></a><span class="co">##   small           3   45</span></span>
<span id="cb148-73"><a href="basicstat.html#cb148-73" aria-hidden="true"></a><span class="co">##   adeno           1   26</span></span>
<span id="cb148-74"><a href="basicstat.html#cb148-74" aria-hidden="true"></a><span class="co">##   large           1   26</span></span>
<span id="cb148-75"><a href="basicstat.html#cb148-75" aria-hidden="true"></a><span class="co">## cell count total and proportion </span></span>
<span id="cb148-76"><a href="basicstat.html#cb148-76" aria-hidden="true"></a><span class="kw">margin.table</span>(dd<span class="fl">.2</span>xtabs)</span>
<span id="cb148-77"><a href="basicstat.html#cb148-77" aria-hidden="true"></a><span class="co">## [1] 137</span></span>
<span id="cb148-78"><a href="basicstat.html#cb148-78" aria-hidden="true"></a><span class="kw">prop.table</span>(dd<span class="fl">.2</span>xtabs)</span>
<span id="cb148-79"><a href="basicstat.html#cb148-79" aria-hidden="true"></a><span class="co">##           censor</span></span>
<span id="cb148-80"><a href="basicstat.html#cb148-80" aria-hidden="true"></a><span class="co">## cellcode   survival     dead</span></span>
<span id="cb148-81"><a href="basicstat.html#cb148-81" aria-hidden="true"></a><span class="co">##   squamous 0.029197 0.226277</span></span>
<span id="cb148-82"><a href="basicstat.html#cb148-82" aria-hidden="true"></a><span class="co">##   small    0.021898 0.328467</span></span>
<span id="cb148-83"><a href="basicstat.html#cb148-83" aria-hidden="true"></a><span class="co">##   adeno    0.007299 0.189781</span></span>
<span id="cb148-84"><a href="basicstat.html#cb148-84" aria-hidden="true"></a><span class="co">##   large    0.007299 0.189781</span></span>
<span id="cb148-85"><a href="basicstat.html#cb148-85" aria-hidden="true"></a><span class="co">## condition on row</span></span>
<span id="cb148-86"><a href="basicstat.html#cb148-86" aria-hidden="true"></a><span class="kw">margin.table</span>(dd<span class="fl">.2</span>xtabs, <span class="dt">margin =</span> <span class="dv">1</span>)</span>
<span id="cb148-87"><a href="basicstat.html#cb148-87" aria-hidden="true"></a><span class="co">## cellcode</span></span>
<span id="cb148-88"><a href="basicstat.html#cb148-88" aria-hidden="true"></a><span class="co">## squamous    small    adeno    large </span></span>
<span id="cb148-89"><a href="basicstat.html#cb148-89" aria-hidden="true"></a><span class="co">##       35       48       27       27</span></span>
<span id="cb148-90"><a href="basicstat.html#cb148-90" aria-hidden="true"></a><span class="kw">prop.table</span>(dd<span class="fl">.2</span>xtabs, <span class="dt">margin =</span> <span class="dv">1</span>)</span>
<span id="cb148-91"><a href="basicstat.html#cb148-91" aria-hidden="true"></a><span class="co">##           censor</span></span>
<span id="cb148-92"><a href="basicstat.html#cb148-92" aria-hidden="true"></a><span class="co">## cellcode   survival    dead</span></span>
<span id="cb148-93"><a href="basicstat.html#cb148-93" aria-hidden="true"></a><span class="co">##   squamous  0.11429 0.88571</span></span>
<span id="cb148-94"><a href="basicstat.html#cb148-94" aria-hidden="true"></a><span class="co">##   small     0.06250 0.93750</span></span>
<span id="cb148-95"><a href="basicstat.html#cb148-95" aria-hidden="true"></a><span class="co">##   adeno     0.03704 0.96296</span></span>
<span id="cb148-96"><a href="basicstat.html#cb148-96" aria-hidden="true"></a><span class="co">##   large     0.03704 0.96296</span></span>
<span id="cb148-97"><a href="basicstat.html#cb148-97" aria-hidden="true"></a><span class="co">## condition on column</span></span>
<span id="cb148-98"><a href="basicstat.html#cb148-98" aria-hidden="true"></a><span class="kw">margin.table</span>(dd<span class="fl">.2</span>xtabs, <span class="dt">margin =</span> <span class="dv">2</span>)</span>
<span id="cb148-99"><a href="basicstat.html#cb148-99" aria-hidden="true"></a><span class="co">## censor</span></span>
<span id="cb148-100"><a href="basicstat.html#cb148-100" aria-hidden="true"></a><span class="co">## survival     dead </span></span>
<span id="cb148-101"><a href="basicstat.html#cb148-101" aria-hidden="true"></a><span class="co">##        9      128</span></span>
<span id="cb148-102"><a href="basicstat.html#cb148-102" aria-hidden="true"></a><span class="kw">prop.table</span>(dd<span class="fl">.2</span>xtabs, <span class="dt">margin =</span> <span class="dv">2</span>)</span>
<span id="cb148-103"><a href="basicstat.html#cb148-103" aria-hidden="true"></a><span class="co">##           censor</span></span>
<span id="cb148-104"><a href="basicstat.html#cb148-104" aria-hidden="true"></a><span class="co">## cellcode   survival   dead</span></span>
<span id="cb148-105"><a href="basicstat.html#cb148-105" aria-hidden="true"></a><span class="co">##   squamous   0.4444 0.2422</span></span>
<span id="cb148-106"><a href="basicstat.html#cb148-106" aria-hidden="true"></a><span class="co">##   small      0.3333 0.3516</span></span>
<span id="cb148-107"><a href="basicstat.html#cb148-107" aria-hidden="true"></a><span class="co">##   adeno      0.1111 0.2031</span></span>
<span id="cb148-108"><a href="basicstat.html#cb148-108" aria-hidden="true"></a><span class="co">##   large      0.1111 0.2031</span></span></code></pre></div>
</div>
</div>
<div id="機率函式與亂數生成函式" class="section level2" number="7.3">
<h2><span class="header-section-number">7.3</span> 機率函式與亂數生成函式</h2>
<p>{R} 具有詳盡的機率函式與亂數生成函式參見表 \ref{tab:RDistFun**, 如令 <span class="math inline">\(X\)</span> 為一隨機變數 (random variable), 定義如下.</p>
<p><span class="math display">\[
\begin{aligned}
&amp;  f = f(X = x) = \text{機率密度函數}\; F(x) = \int f(x) dx = \text{累積機率分配函數}\\
p &amp;  =   F(q) = P (X \le q) = \text{累積機率分配函數, cumulative distribution function}  \\
q &amp;  =   Q (u) = F^{-1} (p) = \text{分位數函數, quantile function}, \; \text{其中}\;  p \le P (X \le q) \\
d &amp;  =  f(x) = F&#39; (x) = P (X = x) = \text{機率密度分配函數, probability density function} \\
r &amp;  =  R (r) = f^{-1} (x)  = \text{隨機亂數函數, random number}, 
\end{aligned}
\]</span></p>
<p>在 {R} 中, 相同的機率函數 (probability function), 使用相同的機率名稱,
<code>ProbFun</code>,
在機率名稱, <code>ProbFun</code>, 之間,
加上 4 種不同的小寫字母, <code>p</code>, <code>q</code>, <code>d</code>, <code>r</code>,
產生不同的機率函式.
例如, <code>fProbFun</code>,
表示用相同的機率函式定義, 產生上述不同之結果.
非中央參數 (non-centrality parameter), <code>ncp</code> 現在僅用於累積分配函數,
此外還有函是 <code>ptukey()</code> 和 <code>qtukey()</code> 計算
Studentized Range Distribution.</p>
<table>
<caption>機率函式</caption>
<thead>
<tr class="header">
<th>機率分配</th>
<th>{R} 函式名 (ProbFun)</th>
<th>引數</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>beta</td>
<td><code>beta</code></td>
<td>shape1, shape2, ncp</td>
</tr>
<tr class="even">
<td>binomial</td>
<td><code>binom</code></td>
<td>size, prob</td>
</tr>
<tr class="odd">
<td>Cauchy</td>
<td><code>cauchy</code></td>
<td>location, scale</td>
</tr>
<tr class="even">
<td>chi-squared</td>
<td><code>chisq</code></td>
<td>df, ncp</td>
</tr>
<tr class="odd">
<td>exponential</td>
<td><code>exp</code></td>
<td>rate</td>
</tr>
<tr class="even">
<td>F</td>
<td><code>f</code></td>
<td>df1, df1, ncp</td>
</tr>
<tr class="odd">
<td>gamma</td>
<td><code>gamma</code></td>
<td>shape, scale</td>
</tr>
<tr class="even">
<td>geometric</td>
<td><code>geom</code></td>
<td>prob</td>
</tr>
<tr class="odd">
<td>hypergeometric</td>
<td><code>hyper</code></td>
<td>m, n, k</td>
</tr>
<tr class="even">
<td>log-normal</td>
<td><code>lnorm</code></td>
<td>meanlog, sdlog</td>
</tr>
<tr class="odd">
<td>logistic</td>
<td><code>logis</code></td>
<td>location, scale</td>
</tr>
<tr class="even">
<td>negative binomial</td>
<td></td>
<td>nbinom</td>
</tr>
<tr class="odd">
<td>normal</td>
<td><code>norm</code></td>
<td>mean, sd</td>
</tr>
<tr class="even">
<td>Poisson</td>
<td><code>pois</code></td>
<td>lambda</td>
</tr>
<tr class="odd">
<td>Student’s</td>
<td><code>t</code></td>
<td>t df, ncp</td>
</tr>
<tr class="even">
<td>uniform</td>
<td><code>unif</code></td>
<td>min, max</td>
</tr>
<tr class="odd">
<td>Weibull</td>
<td><code>weibull</code></td>
<td>shape, scale</td>
</tr>
<tr class="even">
<td>Wilcoxon</td>
<td><code>wilcox</code></td>
<td>m, n</td>
</tr>
</tbody>
</table>
<ul>
<li><code>p</code> 表示 <strong>累積機率分配函數</strong> (<strong>cumulative distribution function, CDF</strong>).</li>
<li><code>q</code> 表示 <strong>分位數</strong> (<strong>quantile</strong>),
符合 <span class="math inline">\(u \le P (X &lt; = x)\)</span> 的最小 <span class="math inline">\(x\)</span>.</li>
<li><code>d</code> 表示 <strong>機率密度函數</strong> (<strong>probability density function, pdf</strong>).</li>
<li><code>r</code> 表示隨機模擬 <strong>偽隨機亂數</strong>, <strong>隨機亂數</strong>
生成函式 (<strong>pseudo-random number generation function</strong>, <strong>random number</strong>).</li>
<li><code>dProbFun</code> 的第一個參數是 <span class="math inline">\(x\)</span>.</li>
<li><code>pProbFun</code> 的第一個參數是 <span class="math inline">\(q\)</span>.</li>
<li><code>qProbFun</code> 的第一個參數是 <span class="math inline">\(p\)</span>.</li>
<li><code>rProbFun</code> 的的第一個參數是 <span class="math inline">\(n\)</span>, 生成亂數之數目.</li>
<li><code>pProbFun</code> 和 <code>qProbFun</code> 函數 都有邏輯引數 <code>lower.tail** 和</code>log.p`.
<ul>
<li>若 <code>lower.tail = TRUE</code> (default), 機率計算為 <span class="math inline">\(P (X &lt; = x)\)</span>.</li>
<li>若 <code>lower.tail = FALSE</code> 機率計算為 <span class="math inline">\(P (X &gt; x)\)</span>.</li>
<li>若 <code>log.p = TRUE</code>, 機率 <span class="math inline">\(p\)</span> 是以 <code>log(p)</code> 輸入與輸出.</li>
</ul></li>
<li><code>dProbFun</code> 也有一個邏輯引數 <code>log</code>, 用來計算所要的對數機率值.</li>
</ul>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="basicstat.html#cb149-1" aria-hidden="true"></a><span class="co"># normal distribution</span></span>
<span id="cb149-2"><a href="basicstat.html#cb149-2" aria-hidden="true"></a><span class="kw">pnorm</span>(<span class="fl">1.96</span>)</span>
<span id="cb149-3"><a href="basicstat.html#cb149-3" aria-hidden="true"></a><span class="co">## [1] 0.975</span></span>
<span id="cb149-4"><a href="basicstat.html#cb149-4" aria-hidden="true"></a><span class="kw">qnorm</span>(<span class="fl">0.975</span>)</span>
<span id="cb149-5"><a href="basicstat.html#cb149-5" aria-hidden="true"></a><span class="co">## [1] 1.96</span></span>
<span id="cb149-6"><a href="basicstat.html#cb149-6" aria-hidden="true"></a><span class="kw">dnorm</span>(<span class="fl">1.96</span>)</span>
<span id="cb149-7"><a href="basicstat.html#cb149-7" aria-hidden="true"></a><span class="co">## [1] 0.05844</span></span>
<span id="cb149-8"><a href="basicstat.html#cb149-8" aria-hidden="true"></a><span class="co"># Poisson distribution</span></span>
<span id="cb149-9"><a href="basicstat.html#cb149-9" aria-hidden="true"></a><span class="kw">rpois</span>(<span class="dv">10</span>, <span class="dv">1</span>)</span>
<span id="cb149-10"><a href="basicstat.html#cb149-10" aria-hidden="true"></a><span class="co">##  [1] 0 0 0 1 1 2 1 1 4 1</span></span>
<span id="cb149-11"><a href="basicstat.html#cb149-11" aria-hidden="true"></a><span class="kw">rpois</span>(<span class="dv">10</span>, <span class="dv">2</span>)</span>
<span id="cb149-12"><a href="basicstat.html#cb149-12" aria-hidden="true"></a><span class="co">##  [1] 3 4 1 2 0 1 1 0 1 4</span></span>
<span id="cb149-13"><a href="basicstat.html#cb149-13" aria-hidden="true"></a><span class="kw">rpois</span>(<span class="dv">10</span>, <span class="dv">20</span>)</span>
<span id="cb149-14"><a href="basicstat.html#cb149-14" aria-hidden="true"></a><span class="co">##  [1] 18 21 16 23 22 24 23 20 11 22</span></span>
<span id="cb149-15"><a href="basicstat.html#cb149-15" aria-hidden="true"></a><span class="co">## Cumulative distribution</span></span>
<span id="cb149-16"><a href="basicstat.html#cb149-16" aria-hidden="true"></a><span class="co">## Pr(x &lt;= 2)</span></span>
<span id="cb149-17"><a href="basicstat.html#cb149-17" aria-hidden="true"></a><span class="kw">ppois</span>(<span class="dv">2</span>, <span class="dv">2</span>)</span>
<span id="cb149-18"><a href="basicstat.html#cb149-18" aria-hidden="true"></a><span class="co">## [1] 0.6767</span></span>
<span id="cb149-19"><a href="basicstat.html#cb149-19" aria-hidden="true"></a><span class="kw">ppois</span>(<span class="dv">4</span>, <span class="dv">2</span>)</span>
<span id="cb149-20"><a href="basicstat.html#cb149-20" aria-hidden="true"></a><span class="co">## [1] 0.9473</span></span>
<span id="cb149-21"><a href="basicstat.html#cb149-21" aria-hidden="true"></a><span class="kw">ppois</span>(<span class="dv">6</span>, <span class="dv">2</span>)</span>
<span id="cb149-22"><a href="basicstat.html#cb149-22" aria-hidden="true"></a><span class="co">## [1] 0.9955</span></span>
<span id="cb149-23"><a href="basicstat.html#cb149-23" aria-hidden="true"></a><span class="co"># t distribution</span></span>
<span id="cb149-24"><a href="basicstat.html#cb149-24" aria-hidden="true"></a><span class="kw">qt</span>(<span class="fl">0.995</span>, <span class="dt">df =</span> <span class="dv">2</span>)</span>
<span id="cb149-25"><a href="basicstat.html#cb149-25" aria-hidden="true"></a><span class="co">## [1] 9.925</span></span>
<span id="cb149-26"><a href="basicstat.html#cb149-26" aria-hidden="true"></a><span class="dv">2</span><span class="op">*</span><span class="kw">pt</span>(<span class="op">-</span><span class="fl">1.96</span>, <span class="dt">df =</span> <span class="dv">2</span>)</span>
<span id="cb149-27"><a href="basicstat.html#cb149-27" aria-hidden="true"></a><span class="co">## [1] 0.1891</span></span>
<span id="cb149-28"><a href="basicstat.html#cb149-28" aria-hidden="true"></a><span class="dv">2</span><span class="op">*</span><span class="kw">pt</span>(<span class="op">-</span><span class="fl">1.96</span>, <span class="dt">df =</span> <span class="dv">30</span>)</span>
<span id="cb149-29"><a href="basicstat.html#cb149-29" aria-hidden="true"></a><span class="co">## [1] 0.05934</span></span>
<span id="cb149-30"><a href="basicstat.html#cb149-30" aria-hidden="true"></a><span class="co"># upper 1% point for an F(1, 2) distribution</span></span>
<span id="cb149-31"><a href="basicstat.html#cb149-31" aria-hidden="true"></a><span class="kw">sqrt</span>(<span class="kw">qf</span>(<span class="fl">0.99</span>, <span class="dv">1</span>, <span class="dv">2</span>))</span>
<span id="cb149-32"><a href="basicstat.html#cb149-32" aria-hidden="true"></a><span class="co">## [1] 9.925</span></span></code></pre></div>
<p>通常產生亂數序列希望是不會重復的,
實際上, {R} 在現在操作視窗下, 第一次產生時亂數時,
從當下時間 (current time), 生成一個
<strong>種子</strong>
(<strong>seed</strong>)
出發,
不斷迭代更新產生隨機均等分配亂數 (uniform random number),
所以不同時間下執行 {R}, 啟用不同的種子, 隨後內部的隨機種子就已經改變了, 模擬亂數是不會重復的,
有時我們需要模擬結果是可重復的亂數序列,
此時需要用函式 <code>set.seed()</code>,
在每次產生偽隨機亂數之前, 把種子設定種子為某一特定正整數即可.</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="basicstat.html#cb150-1" aria-hidden="true"></a><span class="co">## generate random number</span></span>
<span id="cb150-2"><a href="basicstat.html#cb150-2" aria-hidden="true"></a><span class="co">## set.seed(): set initial value</span></span>
<span id="cb150-3"><a href="basicstat.html#cb150-3" aria-hidden="true"></a><span class="co">## Caution use set.seed() everytime!</span></span>
<span id="cb150-4"><a href="basicstat.html#cb150-4" aria-hidden="true"></a><span class="co">## uniform</span></span>
<span id="cb150-5"><a href="basicstat.html#cb150-5" aria-hidden="true"></a><span class="kw">runif</span>(<span class="dv">5</span>)</span>
<span id="cb150-6"><a href="basicstat.html#cb150-6" aria-hidden="true"></a><span class="co">## [1] 0.86121 0.43810 0.24480 0.07068 0.09947</span></span>
<span id="cb150-7"><a href="basicstat.html#cb150-7" aria-hidden="true"></a><span class="kw">runif</span>(<span class="dv">5</span>)</span>
<span id="cb150-8"><a href="basicstat.html#cb150-8" aria-hidden="true"></a><span class="co">## [1] 0.3163 0.5186 0.6620 0.4068 0.9129</span></span>
<span id="cb150-9"><a href="basicstat.html#cb150-9" aria-hidden="true"></a><span class="kw">set.seed</span>(<span class="dv">10</span>)</span>
<span id="cb150-10"><a href="basicstat.html#cb150-10" aria-hidden="true"></a><span class="kw">runif</span>(<span class="dv">5</span>)</span>
<span id="cb150-11"><a href="basicstat.html#cb150-11" aria-hidden="true"></a><span class="co">## [1] 0.50748 0.30677 0.42691 0.69310 0.08514</span></span>
<span id="cb150-12"><a href="basicstat.html#cb150-12" aria-hidden="true"></a><span class="kw">set.seed</span>(<span class="dv">10</span>)</span>
<span id="cb150-13"><a href="basicstat.html#cb150-13" aria-hidden="true"></a><span class="kw">runif</span>(<span class="dv">5</span>)</span>
<span id="cb150-14"><a href="basicstat.html#cb150-14" aria-hidden="true"></a><span class="co">## [1] 0.50748 0.30677 0.42691 0.69310 0.08514</span></span>
<span id="cb150-15"><a href="basicstat.html#cb150-15" aria-hidden="true"></a><span class="co"># norm</span></span>
<span id="cb150-16"><a href="basicstat.html#cb150-16" aria-hidden="true"></a><span class="kw">rnorm</span>(<span class="dv">5</span>)</span>
<span id="cb150-17"><a href="basicstat.html#cb150-17" aria-hidden="true"></a><span class="co">## [1] -0.7540 -0.6059 -0.1772  0.1706  0.2428</span></span>
<span id="cb150-18"><a href="basicstat.html#cb150-18" aria-hidden="true"></a><span class="kw">rnorm</span>(<span class="dv">5</span>)</span>
<span id="cb150-19"><a href="basicstat.html#cb150-19" aria-hidden="true"></a><span class="co">## [1] -0.1794 -0.6305  0.9787  0.2933 -0.3703</span></span>
<span id="cb150-20"><a href="basicstat.html#cb150-20" aria-hidden="true"></a><span class="kw">set.seed</span>(<span class="dv">10</span>)</span>
<span id="cb150-21"><a href="basicstat.html#cb150-21" aria-hidden="true"></a><span class="kw">rnorm</span>(<span class="dv">5</span>)</span>
<span id="cb150-22"><a href="basicstat.html#cb150-22" aria-hidden="true"></a><span class="co">## [1]  0.01875 -0.18425 -1.37133 -0.59917  0.29455</span></span>
<span id="cb150-23"><a href="basicstat.html#cb150-23" aria-hidden="true"></a><span class="kw">set.seed</span>(<span class="dv">10</span>)</span>
<span id="cb150-24"><a href="basicstat.html#cb150-24" aria-hidden="true"></a><span class="kw">rnorm</span>(<span class="dv">5</span>)</span>
<span id="cb150-25"><a href="basicstat.html#cb150-25" aria-hidden="true"></a><span class="co">## [1]  0.01875 -0.18425 -1.37133 -0.59917  0.29455</span></span>
<span id="cb150-26"><a href="basicstat.html#cb150-26" aria-hidden="true"></a><span class="co">##  normal + uniform</span></span>
<span id="cb150-27"><a href="basicstat.html#cb150-27" aria-hidden="true"></a><span class="kw">set.seed</span>(<span class="dv">10</span>)</span>
<span id="cb150-28"><a href="basicstat.html#cb150-28" aria-hidden="true"></a><span class="kw">runif</span>(<span class="dv">5</span>)</span>
<span id="cb150-29"><a href="basicstat.html#cb150-29" aria-hidden="true"></a><span class="co">## [1] 0.50748 0.30677 0.42691 0.69310 0.08514</span></span>
<span id="cb150-30"><a href="basicstat.html#cb150-30" aria-hidden="true"></a><span class="kw">rnorm</span>(<span class="dv">5</span>)</span>
<span id="cb150-31"><a href="basicstat.html#cb150-31" aria-hidden="true"></a><span class="co">## [1] -0.7540 -0.6059 -0.1772  0.1706  0.2428</span></span>
<span id="cb150-32"><a href="basicstat.html#cb150-32" aria-hidden="true"></a><span class="kw">set.seed</span>(<span class="dv">10</span>)</span>
<span id="cb150-33"><a href="basicstat.html#cb150-33" aria-hidden="true"></a><span class="kw">runif</span>(<span class="dv">5</span>)</span>
<span id="cb150-34"><a href="basicstat.html#cb150-34" aria-hidden="true"></a><span class="co">## [1] 0.50748 0.30677 0.42691 0.69310 0.08514</span></span>
<span id="cb150-35"><a href="basicstat.html#cb150-35" aria-hidden="true"></a><span class="kw">rnorm</span>(<span class="dv">5</span>)</span>
<span id="cb150-36"><a href="basicstat.html#cb150-36" aria-hidden="true"></a><span class="co">## [1] -0.7540 -0.6059 -0.1772  0.1706  0.2428</span></span>
<span id="cb150-37"><a href="basicstat.html#cb150-37" aria-hidden="true"></a><span class="kw">set.seed</span>(<span class="dv">10</span>)</span>
<span id="cb150-38"><a href="basicstat.html#cb150-38" aria-hidden="true"></a><span class="kw">rnorm</span>(<span class="dv">5</span>)</span>
<span id="cb150-39"><a href="basicstat.html#cb150-39" aria-hidden="true"></a><span class="co">## [1]  0.01875 -0.18425 -1.37133 -0.59917  0.29455</span></span>
<span id="cb150-40"><a href="basicstat.html#cb150-40" aria-hidden="true"></a><span class="kw">runif</span>(<span class="dv">5</span>)</span>
<span id="cb150-41"><a href="basicstat.html#cb150-41" aria-hidden="true"></a><span class="co">## [1] 0.6517 0.5677 0.1135 0.5959 0.3580</span></span></code></pre></div>
</div>
<div id="隨機抽樣函式-sample" class="section level2" number="7.4">
<h2><span class="header-section-number">7.4</span> 隨機抽樣函式 sample()</h2>
<p>在 {R} 中有一個常用的隨機抽樣函式, <code>sample()</code>, 用法如下.
若要重覆出現相同的隨機樣本, 須設定起始的一個
<strong>種子</strong>
(<strong>seed</strong>).</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="basicstat.html#cb151-1" aria-hidden="true"></a><span class="kw">sample</span>(x, size, <span class="dt">replace =</span> <span class="ot">FALSE</span>, <span class="dt">prob =</span> <span class="ot">NULL</span>)</span></code></pre></div>
<ul>
<li><code>x</code> 為一長度大於 1 的任意向量, 或是一個正整數.</li>
<li><code>size = k</code> 設定所要抽出之樣本數.</li>
<li><code>prob</code> 設定每一個個體被抽取之相對應機率或比率之向量,
<ul>
<li>若無設定值, 則每一個個體被抽取之相對應機率為相等.</li>
</ul></li>
<li><code>replace = FALSE</code> 邏輯指令, 設定是否可重複抽取.</li>
</ul>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="basicstat.html#cb152-1" aria-hidden="true"></a><span class="co">## random sampling</span></span>
<span id="cb152-2"><a href="basicstat.html#cb152-2" aria-hidden="true"></a>letters</span>
<span id="cb152-3"><a href="basicstat.html#cb152-3" aria-hidden="true"></a><span class="co">##  [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; &quot;e&quot; &quot;f&quot; &quot;g&quot; &quot;h&quot; &quot;i&quot; &quot;j&quot; &quot;k&quot; &quot;l&quot; &quot;m&quot; &quot;n&quot; &quot;o&quot; &quot;p&quot; &quot;q&quot; &quot;r&quot; &quot;s&quot; &quot;t&quot; &quot;u&quot; &quot;v&quot;</span></span>
<span id="cb152-4"><a href="basicstat.html#cb152-4" aria-hidden="true"></a><span class="co">## [23] &quot;w&quot; &quot;x&quot; &quot;y&quot; &quot;z&quot;</span></span>
<span id="cb152-5"><a href="basicstat.html#cb152-5" aria-hidden="true"></a><span class="kw">sample</span>(letters, <span class="dv">5</span>)</span>
<span id="cb152-6"><a href="basicstat.html#cb152-6" aria-hidden="true"></a><span class="co">## [1] &quot;g&quot; &quot;j&quot; &quot;b&quot; &quot;m&quot; &quot;h&quot;</span></span>
<span id="cb152-7"><a href="basicstat.html#cb152-7" aria-hidden="true"></a><span class="kw">sample</span>(letters, <span class="dv">5</span>)</span>
<span id="cb152-8"><a href="basicstat.html#cb152-8" aria-hidden="true"></a><span class="co">## [1] &quot;n&quot; &quot;g&quot; &quot;f&quot; &quot;y&quot; &quot;v&quot;</span></span>
<span id="cb152-9"><a href="basicstat.html#cb152-9" aria-hidden="true"></a><span class="kw">set.seed</span>(<span class="dv">1</span>)</span>
<span id="cb152-10"><a href="basicstat.html#cb152-10" aria-hidden="true"></a><span class="kw">sample</span>(letters, <span class="dv">5</span>)</span>
<span id="cb152-11"><a href="basicstat.html#cb152-11" aria-hidden="true"></a><span class="co">## [1] &quot;y&quot; &quot;d&quot; &quot;g&quot; &quot;a&quot; &quot;b&quot;</span></span>
<span id="cb152-12"><a href="basicstat.html#cb152-12" aria-hidden="true"></a><span class="kw">sample</span>(letters, <span class="dv">5</span>)</span>
<span id="cb152-13"><a href="basicstat.html#cb152-13" aria-hidden="true"></a><span class="co">## [1] &quot;w&quot; &quot;k&quot; &quot;n&quot; &quot;r&quot; &quot;s&quot;</span></span>
<span id="cb152-14"><a href="basicstat.html#cb152-14" aria-hidden="true"></a><span class="kw">set.seed</span>(<span class="dv">1</span>)</span>
<span id="cb152-15"><a href="basicstat.html#cb152-15" aria-hidden="true"></a><span class="kw">sample</span>(letters, <span class="dv">5</span>)</span>
<span id="cb152-16"><a href="basicstat.html#cb152-16" aria-hidden="true"></a><span class="co">## [1] &quot;y&quot; &quot;d&quot; &quot;g&quot; &quot;a&quot; &quot;b&quot;</span></span>
<span id="cb152-17"><a href="basicstat.html#cb152-17" aria-hidden="true"></a><span class="kw">sample</span>(letters, <span class="dv">5</span>)</span>
<span id="cb152-18"><a href="basicstat.html#cb152-18" aria-hidden="true"></a><span class="co">## [1] &quot;w&quot; &quot;k&quot; &quot;n&quot; &quot;r&quot; &quot;s&quot;</span></span>
<span id="cb152-19"><a href="basicstat.html#cb152-19" aria-hidden="true"></a><span class="co">## sampling 5 subjects from 10 subjects</span></span>
<span id="cb152-20"><a href="basicstat.html#cb152-20" aria-hidden="true"></a><span class="co">## without or with replacement</span></span>
<span id="cb152-21"><a href="basicstat.html#cb152-21" aria-hidden="true"></a><span class="kw">set.seed</span>(<span class="dv">1</span>)</span>
<span id="cb152-22"><a href="basicstat.html#cb152-22" aria-hidden="true"></a>x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span></span>
<span id="cb152-23"><a href="basicstat.html#cb152-23" aria-hidden="true"></a><span class="kw">sample</span>(x, <span class="dt">size =</span> <span class="dv">5</span>, <span class="dt">replace =</span> <span class="ot">FALSE</span>) <span class="co"># (a) no resampling</span></span>
<span id="cb152-24"><a href="basicstat.html#cb152-24" aria-hidden="true"></a><span class="co">## [1] 9 4 7 1 2</span></span>
<span id="cb152-25"><a href="basicstat.html#cb152-25" aria-hidden="true"></a><span class="kw">sample</span>(x, <span class="dt">size =</span> <span class="dv">5</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>)  <span class="co"># (b) resampling</span></span>
<span id="cb152-26"><a href="basicstat.html#cb152-26" aria-hidden="true"></a><span class="co">## [1] 7 2 3 1 5</span></span>
<span id="cb152-27"><a href="basicstat.html#cb152-27" aria-hidden="true"></a><span class="co"># permutation</span></span>
<span id="cb152-28"><a href="basicstat.html#cb152-28" aria-hidden="true"></a><span class="kw">set.seed</span>(<span class="dv">1</span>)</span>
<span id="cb152-29"><a href="basicstat.html#cb152-29" aria-hidden="true"></a>x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span></span>
<span id="cb152-30"><a href="basicstat.html#cb152-30" aria-hidden="true"></a><span class="kw">sample</span>(x, <span class="dt">size =</span> <span class="dv">10</span>, <span class="dt">replace =</span> <span class="ot">FALSE</span>) <span class="co"># no resampling</span></span>
<span id="cb152-31"><a href="basicstat.html#cb152-31" aria-hidden="true"></a><span class="co">##  [1]  9  4  7  1  2  5  3 10  6  8</span></span>
<span id="cb152-32"><a href="basicstat.html#cb152-32" aria-hidden="true"></a><span class="co"># equal probability</span></span>
<span id="cb152-33"><a href="basicstat.html#cb152-33" aria-hidden="true"></a><span class="kw">set.seed</span>(<span class="dv">1</span>)</span>
<span id="cb152-34"><a href="basicstat.html#cb152-34" aria-hidden="true"></a>x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span></span>
<span id="cb152-35"><a href="basicstat.html#cb152-35" aria-hidden="true"></a><span class="kw">sample</span>(x, <span class="dt">size =</span> <span class="dv">5</span>, <span class="dt">replace =</span> <span class="ot">FALSE</span>, <span class="dt">prob =</span> <span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>))</span>
<span id="cb152-36"><a href="basicstat.html#cb152-36" aria-hidden="true"></a><span class="co">## [1]  9  8  6  2 10</span></span>
<span id="cb152-37"><a href="basicstat.html#cb152-37" aria-hidden="true"></a><span class="kw">sample</span>(x, <span class="dt">size =</span> <span class="dv">5</span>, <span class="dt">replace =</span> <span class="ot">FALSE</span>, <span class="dt">prob =</span> <span class="kw">c</span>(<span class="kw">rep</span>(<span class="dv">1</span>, <span class="dv">10</span>) <span class="op">/</span><span class="st"> </span><span class="fl">10.0</span>))</span>
<span id="cb152-38"><a href="basicstat.html#cb152-38" aria-hidden="true"></a><span class="co">## [1] 10  1  7  6  2</span></span>
<span id="cb152-39"><a href="basicstat.html#cb152-39" aria-hidden="true"></a><span class="co"># unequal rpobability</span></span>
<span id="cb152-40"><a href="basicstat.html#cb152-40" aria-hidden="true"></a><span class="kw">set.seed</span>(<span class="dv">1</span>)</span>
<span id="cb152-41"><a href="basicstat.html#cb152-41" aria-hidden="true"></a>x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span></span>
<span id="cb152-42"><a href="basicstat.html#cb152-42" aria-hidden="true"></a>(<span class="dt">prob.rs =</span> <span class="kw">c</span>(<span class="kw">seq</span>(<span class="dv">1</span>, <span class="dv">10</span>) <span class="op">/</span><span class="st"> </span><span class="kw">sum</span>(<span class="kw">seq</span>(<span class="dv">1</span>, <span class="dv">10</span>))))</span>
<span id="cb152-43"><a href="basicstat.html#cb152-43" aria-hidden="true"></a><span class="co">##  [1] 0.01818 0.03636 0.05455 0.07273 0.09091 0.10909 0.12727 0.14545 0.16364 0.18182</span></span>
<span id="cb152-44"><a href="basicstat.html#cb152-44" aria-hidden="true"></a><span class="kw">sum</span>(prob.rs)</span>
<span id="cb152-45"><a href="basicstat.html#cb152-45" aria-hidden="true"></a><span class="co">## [1] 1</span></span>
<span id="cb152-46"><a href="basicstat.html#cb152-46" aria-hidden="true"></a><span class="kw">sample</span>(x, <span class="dt">size =</span> <span class="dv">5</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>,  <span class="dt">prob =</span> <span class="kw">seq</span>(<span class="dv">1</span>, <span class="dv">10</span>))</span>
<span id="cb152-47"><a href="basicstat.html#cb152-47" aria-hidden="true"></a><span class="co">## [1] 9 8 7 3 9</span></span></code></pre></div>
<p>在臨床試驗或實驗性研究, 通常需要產生隨機分組名單,
可利用 <code>sample()</code>, 依照不同隨機指派方法, 產生不同隨機分組名單.
若要重覆出現相同的隨機樣本, 須設定起始的一個
<strong>種子</strong>
(<strong>seed</strong>).</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="basicstat.html#cb153-1" aria-hidden="true"></a><span class="co">## clinical trials or experiments</span></span>
<span id="cb153-2"><a href="basicstat.html#cb153-2" aria-hidden="true"></a><span class="co">## randomization</span></span>
<span id="cb153-3"><a href="basicstat.html#cb153-3" aria-hidden="true"></a><span class="co">## random assign to two groups, total 20 subjects</span></span>
<span id="cb153-4"><a href="basicstat.html#cb153-4" aria-hidden="true"></a><span class="co">## random assigning treatment groups</span></span>
<span id="cb153-5"><a href="basicstat.html#cb153-5" aria-hidden="true"></a><span class="co">## 20 Bernoulli trials</span></span>
<span id="cb153-6"><a href="basicstat.html#cb153-6" aria-hidden="true"></a><span class="kw">set.seed</span>(<span class="dv">1</span>)</span>
<span id="cb153-7"><a href="basicstat.html#cb153-7" aria-hidden="true"></a><span class="kw">sample</span>(<span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="dt">size =</span> <span class="dv">20</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>)</span>
<span id="cb153-8"><a href="basicstat.html#cb153-8" aria-hidden="true"></a><span class="co">##  [1] 0 1 0 0 1 0 0 0 1 1 0 0 0 0 0 1 1 1 1 0</span></span>
<span id="cb153-9"><a href="basicstat.html#cb153-9" aria-hidden="true"></a><span class="kw">sample</span>(<span class="dv">2</span>, <span class="dt">size =</span> <span class="dv">20</span>, <span class="dt">replace =</span> <span class="ot">TRUE</span>)</span>
<span id="cb153-10"><a href="basicstat.html#cb153-10" aria-hidden="true"></a><span class="co">##  [1] 1 1 1 1 1 1 2 1 1 2 2 2 1 2 1 1 2 1 2 2</span></span>
<span id="cb153-11"><a href="basicstat.html#cb153-11" aria-hidden="true"></a><span class="co"># random choose 10 subjects to group 1</span></span>
<span id="cb153-12"><a href="basicstat.html#cb153-12" aria-hidden="true"></a><span class="kw">set.seed</span>(<span class="dv">1</span>)</span>
<span id="cb153-13"><a href="basicstat.html#cb153-13" aria-hidden="true"></a><span class="kw">sample</span>(<span class="dv">20</span>, <span class="dt">size =</span> <span class="dv">10</span>, <span class="dt">replace =</span> <span class="ot">FALSE</span>)</span>
<span id="cb153-14"><a href="basicstat.html#cb153-14" aria-hidden="true"></a><span class="co">##  [1]  4  7  1  2 13 19 11 17 14  3</span></span>
<span id="cb153-15"><a href="basicstat.html#cb153-15" aria-hidden="true"></a><span class="co"># block randomization</span></span>
<span id="cb153-16"><a href="basicstat.html#cb153-16" aria-hidden="true"></a><span class="co"># total 5 blocks, block size 4, choose 2 subjects to group 1</span></span>
<span id="cb153-17"><a href="basicstat.html#cb153-17" aria-hidden="true"></a><span class="kw">set.seed</span>(<span class="dv">1</span>)</span>
<span id="cb153-18"><a href="basicstat.html#cb153-18" aria-hidden="true"></a><span class="kw">replicate</span>(<span class="dv">5</span>, <span class="kw">sample</span>(<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">4</span>), <span class="dt">size =</span> <span class="dv">2</span>, <span class="dt">replace =</span> <span class="ot">FALSE</span>))</span>
<span id="cb153-19"><a href="basicstat.html#cb153-19" aria-hidden="true"></a><span class="co">##      [,1] [,2] [,3] [,4] [,5]</span></span>
<span id="cb153-20"><a href="basicstat.html#cb153-20" aria-hidden="true"></a><span class="co">## [1,]    1    1    1    3    2</span></span>
<span id="cb153-21"><a href="basicstat.html#cb153-21" aria-hidden="true"></a><span class="co">## [2,]    3    2    3    2    3</span></span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="basicfunctiuon.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="basictidy.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "PMingLiU",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["r4biost.pdf", "r4biost.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
